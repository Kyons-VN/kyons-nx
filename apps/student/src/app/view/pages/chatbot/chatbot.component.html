<div class="flex justify-center w-full xl:p-6 h-full overflow-auto md:p-4 p-0 gap-6">
  <student-chatbot-sidebar [isSmMenuHide]="isSmMenuHide" class="contents xl:flex" />
  <div class="w-full h-full flex flex-col gap-3 overflow-hidden">
    <!-- <div
      class="flex flex-col xl:hidden gap-4 justify-start md:p-0 transition-all duration-300 overflow-hidden shrink-0"
      [ngClass]="{ 'h-[80vh] p-6': !isCollapse, 'h-0': isCollapse }"
    >
      <div class="flex flex-col flex-1 items-center gap-4"></div>
    </div> -->
    <div class="chatbox">
      <div class="head">
        <div class="relative z-10 w-full h-[40px]">
          <div class="absolute right-6 flex gap-4 w-full left-0 justify-between xl:justify-end items-start">
            <button class="history-toggle" (click)="toggleMenu()">
              <i class="icon-History"></i>
            </button>
            <div class="w-[170px] h-[40px] relative">
              <img [src]="'/assets/images/' + themeService.getTheme() + '/Mana.svg'" alt="" class="h-[40px]" />
              <div class="battery-bg" [style.width]="manaWidth + 'px'"></div>
              <div class="battery-number">
                {{ batteryLife() }}
              </div>
            </div>
          </div>
        </div>
      </div>
      @if(!isLoadingMessages){
      <ng-flutter
        *ngIf="flutterAppLoaded"
        src="/find-me-game/main.dart.js"
        assetBase="/find-me-game/"
        (appLoaded)="onFlutterAppLoaded($event)"
        class="find-me-game"
        [ngClass]="{ hidden: !isGaming }"
      ></ng-flutter>
      <div class="chat-divider"></div>
      <messages
        [messages]="messages"
        [isThinking]="isThinking"
        (startGame)="play()"
        (isWritingEvent)="updateThinking($event)"
        [userId]="userId"
        [fileService]="fileService"
      />
      <div class="chat-divider"></div>
      <chatbox
        (sendMessage)="sendMessage($event)"
        [isThinking]="isThinking"
        (endGame)="exit()"
        [isGaming]="isGaming"
        (selectFile)="selectFile($event)"
        (selectImage)="selectImage($event)"
        (removeImage)="removeImage()"
        (selectFileFromStorage)="selectFileFromStorage($event)"
        [fileService]="fileService"
        [hasFileFeature]="true"
      />
      } @else if(chatId){
      <!-- <div class="place-self-center flex items-center">
          <ng-lottie [options]="options" width="200px" height="200px"></ng-lottie>
        </div> -->
      <div class="body">
        <div class="message right">
          <div class="content w-full">
            <div class="box w-full shine h-[48px]"></div>
            <div class="box w-full shine h-[48px]"></div>
          </div>
        </div>
        <div class="message left">
          <div class="avatar"><img src="assets/images/kyons-avatar.svg" alt="" /></div>
          <div class="content w-full">
            <div class="box w-full shine h-[48px]"></div>
            <div class="box w-full shine h-[48px]"></div>
            <div class="box w-full shine h-[48px]"></div>
          </div>
        </div>
        <div class="message right">
          <div class="content w-full">
            <div class="box w-full shine h-[48px]"></div>
          </div>
        </div>
        <div class="message left">
          <div class="avatar"><img src="assets/images/kyons-avatar.svg" alt="" /></div>
          <div class="content w-full">
            <div class="box w-full shine h-[120px]"></div>
          </div>
        </div>
      </div>
      }
    </div>
  </div>
  <!-- <div class="xl:flex hidden flex-col flex-1 items-end">
    <h3>{{ theme === 'universe' ? 'Countdown' : 'Đếm ngược' }}</h3>
      <div class="flex gap-1 w-full items-center justify-center text-white">
        <div
          class="flex flex-col w-[calc((100%_-_36px)_/_4)] max-w-[70px] bg-blueGrey-800 py-[14px] rounded-lg text-center"
        >
          <strong class="text-3xl">{{ day }}</strong>
          {{ theme === 'universe' ? (parseInt(day) < 2 ? 'day' : 'days') : 'ngày' }}
        </div>
        <span class="text-3xl text-primaryBlue">:</span>
        <div
          class="flex flex-col w-[calc((100%_-_36px)_/_4)] max-w-[70px] bg-blueGrey-800 py-[14px] rounded-lg text-center"
        >
          <strong class="text-3xl">{{ hour }}</strong>
          {{ theme === 'universe' ? (parseInt(hour) < 2 ? 'hour' : 'hours') : 'giờ' }}
        </div>
        <span class="text-3xl text-primaryBlue">:</span>
        <div
          class="flex flex-col w-[calc((100%_-_36px)_/_4)] max-w-[70px] bg-blueGrey-800 py-[14px] rounded-lg text-center"
        >
          <strong class="text-3xl">{{ minute }}</strong>
          {{ theme === 'universe' ? (parseInt(minute) < 2 ? 'minute' : 'minutes') : 'phút' }}
        </div>
        <span class="text-3xl text-primaryBlue">:</span>
        <div
          class="flex flex-col w-[calc((100%_-_36px)_/_4)] max-w-[70px] bg-blueGrey-800 py-[14px] rounded-lg text-center"
        >
          <strong class="text-3xl">{{ second }}</strong>
          {{ theme === 'universe' ? (parseInt(second) < 2 ? 'second' : 'seconds') : 'giây' }}
        </div>
      </div>
  </div> -->
</div>
