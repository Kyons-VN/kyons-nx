<student-top-menu class="md:hidden" />
<div class="bg-gradient h-full flex flex-col md:flex-row">
  <div class="col md:hidden">
    <div class="bg-rocket-xs text-white px-4 py-8">
      <div class="flex justify-between items-center relative">
        <div class="flex gap-3 items-center">
          <img src="/assets/images/Avatar.svg" alt="" />
          <h4>Xin ch√†o!</h4>
        </div>
        <button (click)="showSubmenu = !showSubmenu">
          <i class="cursor-pointer icon-Settings text-[24px]" type="button"></i>
        </button>
        <div *ngIf="showSubmenu" class="fixed w-full h-full top-0 left-0 z-10" (click)="showSubmenu = false"></div>
        <ul class="absolute right-0 z-20">
          <li class="flex items-center gap-5 cursor-pointer relative">
            <student-right-menu [ngStyle]="{ display: showSubmenu ? 'contents' : 'none' }" />
          </li>
          <!-- <li>
            <div class="relative">
              <img src="assets/icons/clarity_notification-line.svg" class="cursor-pointer" />
              <span class="top-menu-notification"></span>
            </div>
          </li> -->
        </ul>
      </div>
    </div>
    <div class="col p-4 gap-3">
      <h5>L·ªëi t·∫Øt</h5>
      <button
        class="btn-extra-large flex justify-between w-full bg-blue-gradient text-white"
        [disabled]="learnings.length === 0"
        (click)="goToLastestLearningGoal()"
      >
        <span>Ti·∫øp t·ª•c h·ªçc b√†i tr∆∞·ªõc ƒë√≥</span>
        <i class="icon-ArrowForward"></i>
      </button>
    </div>
  </div>
  <div class="col p-4 md:p-8 items-stretch flex-1 gap-6 md:gap-8 md:overflow-y-auto">
    <div class="gap-4 hidden md:flex flex-col">
      <!-- <div class="flex justify-between">
        <img src="/assets/images/logo-h.svg" alt="" width="126px" />
        <div class="flex gap-2">
          <a class="menu-item active">
            <img src="/assets/images/Home.svg" alt="" />
            <span>Trang ch·ªß</span>
          </a>
          <a [routerLink]="paths.chatbot.path" class="menu-item">
            <img src="/assets/images/FAQ.svg" alt="" />
            <span>Chat v·ªõi Kyo</span>
          </a>
          <a [routerLink]="paths.account.path" class="menu-item">
            <img src="/assets/images/Profile.svg" alt="" />
            <span>T√†i kho·∫£n</span>
          </a>
        </div>
      </div> -->
      <student-top-menu />
    </div>
    <div class="col gap-4">
      <div class="flex justify-between">
        <h5 class="hidden md:block">Ch·ªâ s·ªë c·ªßa b·∫°n</h5>
        <span class="h7 md:hidden">Ch·ªâ s·ªë c·ªßa b·∫°n</span>
        <!-- <a (click)="showWhatIsStats = true" class="!text-blueGrey-500 !no-underline flex cursor-pointer gap-0.5">
          <i class="icon-Help"></i>
          <span class="underline">Nh·ªØng ch·ªâ s·ªë n√†y l√† g√¨?</span>
        </a> -->
      </div>
      <div class="stats text-white items-center shadow-4 rounded-2xl md:h-[296px] flex flex-col md:flex-row">
        <div class="flex-1 flex items-center justify-center p-3">
          <img src="/assets/images/Spider chart.svg" alt="" class="w-[179px] md:w-auto" />
        </div>
        <div class="h-[150px] border-r border-solid border-blueGrey-600 hidden md:block"></div>
        <div class="w-[222px] border-t border-solid border-blueGrey-600 md:hidden"></div>
        <div class="flex-1 h-full col gap-6 md:gap-0 items-center justify-start p-14 pt-6 md:pt-14">
          <div class="flex gap-4">
            <img
              width="32px"
              height="32px"
              *ngFor="let o of over; index as i"
              [src]="'/assets/images/' + (o || activeStat === i ? stats[i] : statsBW[i]) + '.svg'"
              alt=""
              (mouseover)="over[i] = true"
              (mouseout)="over[i] = false"
              class="cursor-pointer stat"
              [ngClass]="{ active: activeStat === i }"
              (click)="activeStat = i"
            />
          </div>
          <div class="flex-1 text-base font-bold flex items-center text-center">
            T√≠nh nƒÉng b√≠ m·∫≠t s·∫Øp<br />ƒë∆∞·ª£c b·∫≠t m√≠ ü•≥
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="!isLoading; else loading" class="col gap-4">
      <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4 lg:gap-0">
        <div class="flex flex-col lg:flex-row gap-3 lg:items-center">
          <div class="flex gap-4 items-center">
            <h5 class="hidden md:block">M·ª•c ti√™u g·∫ßn ƒë√¢y</h5>
            <span class="h7 md:hidden">M·ª•c ti√™u g·∫ßn ƒë√¢y</span>
            <!-- <a href="">Xem t·∫•t c·∫£ M·ª•c ti√™u h·ªçc t·∫≠p</a> -->
          </div>
          <a (click)="showAll = !showAll">{{ !showAll ? 'Xem t·∫•t c·∫£' : 'Xem thu g·ªçn' }} M·ª•c ti√™u h·ªçc t·∫≠p</a>
        </div>
        <button
          #btnCreateLearningGoal
          [routerLink]="paths.mockTest.path"
          class="btn gap-2"
          data-tooltip-content="B·∫•m v√†o ƒë√¢y ƒë·ªÉ t·∫°o m·ª•c ti√™u h·ªçc t·∫≠p m·ªõi"
        >
          <i class="icon-Add text-[22px]"></i>T·∫°o m·ª•c ti√™u h·ªçc t·∫≠p m·ªõi
        </button>
      </div>
      <div
        *ngIf="learnings.length === 0; else elseBlock"
        class="bg-mess col items-center gap-2 p-4 md:p-8 mx-[-14px] md:relative"
      >
        <img class="md:hidden" src="/assets/images/pointer-xs.webp" alt="" />
        <img class="hidden md:block absolute top-[10px] right-[122px]" src="/assets/images/pointer.webp" alt="" />
        <h5 class="text-orange">B·∫°n ch∆∞a c√≥ M·ª•c ti√™u h·ªçc t·∫≠p!</h5>
        <p class="max-w-[435px] text-center">
          Kyons c·∫ßn bi·∫øt m·ª•c ti√™u h·ªçc t·∫≠p ƒë·ªÉ t·∫°o ra b√†i t·∫≠p v·ª´a v·ªõi tr√¨nh ƒë·ªô c·ªßa b·∫°n. B·∫•m v√†o n√∫t n√†y ƒë·ªÉ T·∫°o m·ª•c ti√™u
          h·ªçc t·∫≠p ƒë·∫ßu ti√™n nh√©!
        </p>
      </div>
      <ng-template #elseBlock>
        <div
          class="grid grid-col-1 xl:grid-cols-2 gap-x-6 gap-y-4 max-h-[80vh] overflow-y-auto pb-8 px-[24px] mx-[-24px]"
        >
          <div
            (click)="selectLearningGoal(item)"
            *ngFor="let item of learnings | slice : 0 : (showAll ? 1000 : 4)"
            class="learning-goal-item"
          >
            <img src="/assets/images/Subject.svg" alt="" />
            <div class="col gap-0.5 flex-1">
              <h6 class="hidden md:block">{{ item.name }}</h6>
              <span class="h8 md:hidden">{{ item.name }}</span>
              <span>{{ item.program.name }}</span>
            </div>
            <circle-progress
              [percent]="item.progress"
              [title]="item.progress + '%'"
              [animateTitle]="false"
              [showSubtitle]="false"
              [radius]="32"
              titleFontSize="16px"
              titleFontWeight="bold"
              outerStrokeColor="var(--color-lightOrange-1)"
              [lazy]="false"
            ></circle-progress>
          </div>
        </div>
      </ng-template>
      <kyonsvn-tutorial
        *ngIf="showTutorial"
        (skipCallback)="skip()"
        [scriptElements]="[btnCreateLearningGoal]"
        [scriptEvents]="[['click', script]]"
      ></kyonsvn-tutorial>
    </div>
  </div>
  <ng-template #loading>
    <student-loading></student-loading>
  </ng-template>
  <div *ngIf="!isLoading" class="hidden md:flex flex-col p-11 bg-rocket text-white">
    <div class="flex justify-between items-center relative">
      <div class="flex gap-3 items-center">
        <img src="/assets/images/Avatar.svg" alt="" />
        <h4>Xin ch√†o!</h4>
      </div>
      <div class="relative">
        <i (click)="showSubmenu = !showSubmenu" class="cursor-pointer icon-Settings text-[40px]"></i>
        <student-right-menu [ngStyle]="{ display: showSubmenu ? 'contents' : 'none' }" />
      </div>
    </div>
    <div class="flex-1"></div>
    <div class="col gap-4">
      <h5>L·ªëi t·∫Øt</h5>
      <button
        class="btn-extra-large flex justify-between w-full bg-blue-gradient"
        [disabled]="learnings.length === 0"
        (click)="goToLastestLearningGoal()"
      >
        <span>Ti·∫øp t·ª•c h·ªçc b√†i tr∆∞·ªõc ƒë√≥</span>
        <i class="icon-ArrowForward"></i>
      </button>
      <button class="btn-extra-large flex justify-between w-full bg-orange-gradient" [routerLink]="paths.mockTest.path">
        <span>T·∫°o ‚ÄúB√†i ki·ªÉm tra th·ª≠ th√¥ng minh‚Äù m·ªõi</span>
        <i class="icon-ArrowForward"></i>
      </button>
    </div>
  </div>
</div>
<div
  *ngIf="showWhatIsStats"
  class="absolute top-0 left-0 w-full h-screen bg-black bg-opacity-80 flex items-center justify-center"
>
  <div class="col rounded-2xl bg-white gap-6 p-6 w-full md:w-[700px]">
    <h4>Ch·ªâ s·ªë c·ªßa b·∫°n</h4>
    <span>Text</span>
    <button (click)="showWhatIsStats = false" class="btn w-full">ƒê√£ hi·ªÉu</button>
  </div>
</div>
