<div class="w-full h-screen bg-blueGrey-100 flex justify-center">
  <div class="w-full max-w-[1122px] col gap-4 p-6">
    <div class="col gap-2">
      <h4>B√†i t·∫≠p {{ title }}</h4>
    </div>
    <kyonsvn-questions-progress class="w-full" [progress]="testProgress"></kyonsvn-questions-progress>
    <div class="col rounded-lg bg-white p-4 overflow-y-auto md:flex-1 max-h-[calc(100vh_-_200px)] md:max-h-fit">
      <kyonsvn-test-content
        [content]="testContent"
        [submission]="testSubmission"
        (progressEvent)="updateProgress($event)"
        (submissionEvent)="updateSubmission($event)"
        [currentIndex]="currentTestIndex"
        (currentIndexEvent)="currentTestIndex = $event"
        [isActive]="true"
        (completeCallback)="testComplete()"
        [showResult]="showResult"
        (showResultEvent)="showResult = $event"
        class="flex md:flex-1"
      ></kyonsvn-test-content>
      <div class="justify-between hidden md:flex">
        <div class="hidden md:flex flex-1 flex-col">
          <strong class="uppercase">Ph√≠m t·∫Øt:</strong>
          <span>B·∫•m 1,2,3,4 ch·ªçn ƒë√°p √°n, b·∫•m space s·∫Ω l√†m ti·∫øp ho·∫∑c n·ªôp b√†i</span>
        </div>
        <div class="flex gap-2 items-center">
          <button
            id="continue"
            *ngIf="testProgress.isComplete() && showResult"
            (click)="showWaitlistPopup = true"
            class="btn"
          >
            Ti·∫øp
          </button>
          <button
            (click)="handleNextQuestion()"
            [disabled]="testProgress.value < currentTestIndex + 1"
            class="btn"
            *ngIf="!(testProgress.isComplete() && showResult)"
          >
            {{ showResult ? 'Ti·∫øp' : 'Tr·∫£ l·ªùi' }}
          </button>
        </div>
      </div>
    </div>
    <!-- <div class="ads-md">
      <span class="text-white">Mu·ªën luy·ªán t·∫≠p v·ªõi v√¥ h·∫°n c√¢u h·ªèi ƒë∆∞·ª£c t·∫°o ra b·ªüi Tr√≠ tu·ªá nh√¢n t·∫°o (AI)?</span>
      <button class="btn btn-large" (click)="showWaitlistPopup = true">ƒêƒÉng k√Ω Danh s√°ch ch·ªù c·ªßa Kyons!</button>
    </div> -->
    <div class="ads">
      <span class="text-white">Mu·ªën luy·ªán t·∫≠p v·ªõi v√¥ h·∫°n c√¢u h·ªèi ƒë∆∞·ª£c t·∫°o ra b·ªüi Tr√≠ tu·ªá nh√¢n t·∫°o (AI)?</span>
      <button class="btn btn-large w-full md:w-auto" (click)="showWaitlistPopup = true">
        ƒêƒÉng k√Ω Danh s√°ch ch·ªù c·ªßa Kyons!
      </button>
    </div>
    <div class="md:hidden w-full flex items-center justify-between gap-2 mb-20">
      <img class="w-[155px]" src="/assets/images/logo-h.svg" alt="Logo" />
      <div class="flex gap-2 items-center justify-center">
        <!-- <a
          class="btn-outlined btn-icon order-1 md:order-1"
          href="https://forms.gle/b36mTdMWNRY1qkZh7"
          target="_blank"
          #tooltip="matTooltip"
          matTooltip="N·ªôi dung ‚Äúc√≥ v·∫•n ƒë·ªÅ‚Äù? Th√¥ng b√°o cho Kyons li·ªÅn tay!"
          matTooltipPosition="above"
          matTooltipHideDelay="5000"
          matTooltipClass="above"
          aria-label="Button that displays a tooltip that hides when scrolled out of the container"
          ><i class="icon-Error"></i
        ></a> -->
        <button
          *ngIf="testProgress.isComplete() && showResult"
          (click)="showWaitlistPopup = true"
          class="btn btn-icon order-2 md:order-3"
        >
          <i class="icon-Submit"></i>
        </button>
        <button
          (click)="handleNextQuestion()"
          [disabled]="testProgress.value < currentTestIndex + 1"
          class="btn btn-icon order-2 md:order-3"
          *ngIf="!(testProgress.isComplete() && showResult)"
        >
          <i class="icon-ChevronRight"></i>
        </button>
      </div>
    </div>
  </div>
  <div
    *ngIf="showWaitlistPopup"
    class="fixed top-0 left-0 right-0 bottom-0 flex justify-center items-start p-4 bg-black bg-opacity-80"
  >
    <div class="col p-4 gap-4 rounded-lg bg-white max-w-[700px]">
      <img src="/assets/rule-full.jpg" alt="Banner" />
      <div class="col gap-2">
        <h4>Oh no...</h4>
        <p>
          M·ªói flashcard hi·ªán t·∫°i ch·ªâ c√≥ 2 c√¢u b√†i t·∫≠p th√¥i √† üò¢. Nh∆∞ng sau khi Kyons ra m·∫Øt th√¨ m·ªói flashcard s·∫Ω mang
          t·ªõi v√¥ h·∫°n b√†i t·∫≠p th√≠ch ·ª©ng ri√™ng cho b·∫°n ƒë√≥! Tham gia ngay ‚ÄúDanh s√°ch ch·ªù‚Äù ƒë·ªÉ ƒë∆∞·ª£c th√¥ng b√°o s·ªõm nh·∫•t nha!
        </p>
        <p><em>B√≠ m·∫≠t n√®: tham gia danh s√°ch ch·ªù ƒë∆∞·ª£c nh·∫≠n qu√† ƒë√≥!</em></p>
      </div>
      <div class="col gap-2">
        <a id="register" [routerLink]="['/waitlist']" class="btn btn-large w-full">T·ªõi lu√¥n nha</a>
        <button class="btn btn-outlined btn-large w-full" (click)="showWaitlistPopup = false">ƒê√≥ng</button>
      </div>
    </div>
  </div>
</div>
