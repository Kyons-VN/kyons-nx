{"version":3,"file":"apps_student_src_app_presentation_pages_sign-in_sign-in_component_ts.53a6476295bcf6cc.js","mappings":"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","sources":["./apps/student/src/app/infrastructure/auth/credential.ts","./apps/student/src/app/infrastructure/notification/messaging.service.ts","./apps/student/src/app/presentation/pages/sign-in/sign-in.component.ts","./apps/student/src/app/presentation/pages/sign-in/sign-in.component.html","./apps/student/src/app/utils/form.ts"],"sourcesContent":["import { IAuthCredential } from '@domain/auth/i-auth-service';\r\n\r\nexport class AuthCredential implements IAuthCredential {\r\n  email: string;\r\n  password: string;\r\n\r\n  constructor({ email, password }: { email: string; password: string }) {\r\n    this.email = email;\r\n    this.password = password;\r\n  }\r\n\r\n  toJson() {\r\n    return {\r\n      username: this.email,\r\n      password: this.password,\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { AngularFireMessaging } from '@angular/fire/compat/messaging';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MessagingService {\n  constructor(private messaging: AngularFireMessaging) {\n    // Get the current FCM token\n  }\n\n  requestPermission() {\n    return this.messaging.requestPermission;\n  }\n\n  getToken() {\n    return this.messaging.getToken;\n  }\n}\n","import { CommonModule, Location } from '@angular/common';\r\nimport { AfterViewInit, Component, ElementRef, HostBinding, OnDestroy, OnInit, ViewChild, inject } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { Router, RouterModule } from '@angular/router';\r\nimport { RedirectAfterLogin } from '@domain/navigation/i-redirect';\r\nimport { environment } from '@environments/environment';\r\nimport { AccountStandaloneService } from '@infrastructure/auth/account.service';\r\nimport { AuthService } from '@infrastructure/auth/auth.service';\r\nimport { AuthCredential } from '@infrastructure/auth/credential';\r\nimport { LoadingOverlayService } from '@infrastructure/loading-overlay.service';\r\nimport { NavigationService } from '@infrastructure/navigation/navigation.service';\r\nimport { MessagingService } from '@infrastructure/notification/messaging.service';\r\nimport { notificationServiceProvider } from '@infrastructure/notification/notification.service';\r\nimport { UserService } from '@infrastructure/user/user.service';\r\nimport { FormControlStatus } from '@utils/form';\r\n\r\n@Component({\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, RouterModule],\r\n  providers: [notificationServiceProvider],\r\n  templateUrl: './sign-in.component.html',\r\n  styleUrls: ['./sign-in.component.scss'],\r\n})\r\nexport class SignInComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  location = inject(Location);\r\n  navService = inject(NavigationService);\r\n  paths = this.navService.paths;\r\n  fb = inject(FormBuilder);\r\n  authService = inject(AuthService);\r\n  router = inject(Router);\r\n  loading = inject(LoadingOverlayService);\r\n  userService = inject(UserService);\r\n  messagingService = inject(MessagingService);\r\n  accountService = inject(AccountStandaloneService);\r\n\r\n  @HostBinding('class') class = 'h-full';\r\n\r\n  signInForm: FormGroup = this.fb.group({});\r\n  email: FormControl = new FormControl('', [Validators.required, Validators.email]);\r\n  password: FormControl = new FormControl('', Validators.required);\r\n  errorMessage = false;\r\n  processing = false;\r\n  isDebug = false;\r\n  showPassword = false;\r\n  isEdited = false;\r\n\r\n  isPromotionEnable = environment.isPromotionEnable;\r\n  userNotConfirmedError = false;\r\n  resendVerificationEmailError = false;\r\n\r\n  @ViewChild('emailElm') emailElm!: ElementRef;\r\n\r\n  ngOnInit(): void {\r\n    this.signInForm.addControl('email', this.email);\r\n    this.signInForm.addControl('password', this.password);\r\n    this.signInForm.get('email')?.valueChanges.subscribe(() => {\r\n      this.errorMessage = false;\r\n    });\r\n    this.signInForm.get('password')?.valueChanges.subscribe(() => {\r\n      this.errorMessage = false;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loading.hide();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.emailElm.nativeElement.focus();\r\n  }\r\n\r\n  login() {\r\n    if (this.isDebug) {\r\n      this.email.setValue('binhhm2009+0801@gmail.com');\r\n      this.password.setValue('Sx_-2m5c');\r\n    }\r\n    if (!this.isEdited) this.isEdited = true;\r\n    if (!(this.signInForm.get('email')?.dirty && this.signInForm.get('password')?.dirty)) {\r\n      this.signInForm.get('email')?.markAsDirty();\r\n      this.signInForm.get('password')?.markAsDirty();\r\n      return;\r\n    }\r\n    if (this.signInForm.status === FormControlStatus.VALID) {\r\n      this.processing = true;\r\n      this.authService.signIn(new AuthCredential(this.signInForm.value)).subscribe({\r\n        next: result => {\r\n          if (result.success) {\r\n            this.location.replaceState('/');\r\n            const redirectPath = this.navService.getRouteAfterLogin(result.redirect_after_auth);\r\n            if (result.redirect_after_auth == RedirectAfterLogin[RedirectAfterLogin.HomeAppTutorial]) {\r\n              this.userService.setForceCompleteTutorial();\r\n            }\r\n            this.loading.show();\r\n            if (environment.production)\r\n              this.messagingService.requestPermission().subscribe({\r\n                next: value => {\r\n                  console.log('requestPermission next', value);\r\n                  this.messagingService.getToken().subscribe({\r\n                    next: token => {\r\n                      console.log('getToken next', token);\r\n\r\n                      setTimeout(() => {\r\n                        this.router.navigate([redirectPath[0]], redirectPath[1]);\r\n                      }, 600);\r\n                    },\r\n                    error: error => {\r\n                      console.log('getToken error', error);\r\n                    },\r\n                  });\r\n                },\r\n                error: error => {\r\n                  console.log('requestPermission error', error);\r\n                },\r\n              });\r\n            else {\r\n              setTimeout(() => {\r\n                this.router.navigate([redirectPath[0]], redirectPath[1]);\r\n              }, 600);\r\n            }\r\n          } else {\r\n            this.processing = false;\r\n            this.errorMessage = true;\r\n            this.loading.hide();\r\n            if (result.error_code == 'UserNotConfirmedException') {\r\n              this.userNotConfirmedError = true;\r\n            }\r\n          }\r\n        },\r\n        error: () => {\r\n          // TODO: Define error resposes\r\n          this.errorMessage = true;\r\n          this.processing = false;\r\n          this.loading.hide();\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  debug() {\r\n    if (!environment.production) this.isDebug = true;\r\n  }\r\n\r\n  resend() {\r\n    this.accountService.resendVerificationEmail(this.email.value).subscribe({\r\n      next: () => {\r\n        this.router.navigate([this.paths.resendVerified]);\r\n      },\r\n      error: () => {\r\n        this.resendVerificationEmailError = true;\r\n      },\r\n    });\r\n  }\r\n}\r\n","<div class=\"flex-col md:flex md:flex-row h-full md:overflow-hidden\">\r\n  <div class=\"col md:hidden hero-bg py-8 px-6 gap-2\" style=\"height: calc(100vw * 204 / 375)\">\r\n    <img src=\"/assets/images/logo-horizontal-light.webp\" alt=\"\" class=\"self-start h-[32px]\" />\r\n    <span class=\"h7 text-white w-full text-center\">Tri thức khởi đầu từ<br />“Tại sao”?</span>\r\n  </div>\r\n  <div class=\"background-image flex w-full h-full md:items-center justify-center\">\r\n    <div class=\"flex flex-col w-full md:w-[434px] min-h-[338px] p-6 mb-24 gap-6 overflow-auto flex-shrink-0\">\r\n      <img (dblclick)=\"debug()\" src=\"/assets/images/logo-h.svg\" alt=\"Logo\" class=\"h-12 self-start hidden md:block\" />\r\n      <form [formGroup]=\"signInForm\" class=\"col gap-6 w-full\">\r\n        <h4>Mừng bạn quay trở lại!</h4>\r\n        <div class=\"col gap-2\">\r\n          <div class=\"col w-full\">\r\n            <input type=\"text\" #emailElm placeholder=\"Nhập email\" formControlName=\"email\" />\r\n            <div *ngIf=\"email.invalid && isEdited\">\r\n              <div class=\"error\" *ngIf=\"email.errors?.['email']\">Vui lòng nhập theo định dạng abc&#64;email.com.</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"relative w-full\">\r\n            <input\r\n              #passwordElm\r\n              [type]=\"showPassword ? 'text' : 'password'\"\r\n              class=\"w-full\"\r\n              placeholder=\"Nhập mật khẩu\"\r\n              formControlName=\"password\"\r\n            />\r\n            <div\r\n              (click)=\"showPassword = !showPassword\"\r\n              class=\"absolute right-0 top-0 w-11 h-full flex items-center justify-center cursor-pointer\"\r\n            >\r\n              <i *ngIf=\"showPassword\" class=\"icon-VisibilityOff\" tabindex=\"0\"></i>\r\n              <i *ngIf=\"!showPassword\" class=\"icon-Visibility\" tabindex=\"0\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"error\" *ngIf=\"errorMessage\">Thông tin chưa chính xác</div>\r\n        <button (click)=\"login()\" class=\"btn\" [disabled]=\"processing\">\r\n          {{ processing ? 'Đang xử lý' : 'Đăng nhập' }}\r\n        </button>\r\n        <div class=\"col items-start gap-2\">\r\n          <a [routerLink]=\"paths.resetPassword.path\" class=\"text-orange\">Quên mật khẩu</a>\r\n          <span\r\n            >Bạn chưa có tài khoản? &nbsp;\r\n            <a [routerLink]=\"paths.signUp.path\" class=\"text-orange\">Đăng ký tại đây</a></span\r\n          >\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n  <div class=\"hero-img hidden md:flex justify-center flex-shrink-0 overflow-hidden relative\">\r\n    <img class=\"w-full h-full object-cover absolute top-0\" src=\"/assets/images/hero-image.webp\" alt=\"\" />\r\n    <span class=\"text-white text-[36px] font-semibold text-center relative\">Tri thức khởi đầu<br />từ “Tại sao”?</span>\r\n  </div>\r\n</div>\r\n<div\r\n  *ngIf=\"userNotConfirmedError\"\r\n  class=\"bg-blueGrey-100 absolute top-0 left-0 w-screen h-screen flex items-center justify-center p-6\"\r\n>\r\n  <div class=\"flex flex-col items-center justify-center w-full sm:w-[493px] gap-6\">\r\n    <img src=\"assets/images/Account Not Verified.svg\" />\r\n    <div class=\"bg-white rounded-sm p-6 flex flex-col gap-6\">\r\n      <h4 class=\"text-primaryBlue\">Tài khoản của bạn chưa được xác thực</h4>\r\n      <div class=\"flex flex-col gap-2\">\r\n        <span\r\n          >Để có thể sử dụng ứng dụng Kyons, bạn cần <strong>nhấp vào đường dẫn xác thực</strong> đã được gửi trong\r\n          email đăng ký của bạn.</span\r\n        >\r\n        <span>Ngoài ra, bạn có thể yêu cầu gửi lại link xác thực bằng cách bấm vào nút dưới đây</span>\r\n      </div>\r\n      <a class=\"btn\" [routerLink]=\"paths.signIn.path\">Gửi lại email xác thực (30s)</a>\r\n      <button class=\"btn rounded\" (click)=\"userNotConfirmedError = false\">Quay lại đăng nhập</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div\r\n  *ngIf=\"resendVerificationEmailError\"\r\n  class=\"absolute top-0 left-0 w-full h-screen bg-black bg-opacity-80 flex items-center justify-center\"\r\n>\r\n  <div class=\"col rounded-2xl bg-white gap-6 p-6 w-full md:w-[700px] items-center\">\r\n    <img src=\"/assets/images/warning.webp\" alt=\"\" />\r\n    <div class=\"col w-full gap-6\">\r\n      <h5 class=\"text-center\">Chú ý! Chú ý!</h5>\r\n      <span>\r\n        Hệ thống hiện đang gặp sự cố, bạn vui lòng thử lại sau vài phút hoặc liên hệ\r\n        <a href=\"https://www.facebook.com/KyonsVN\" target=\"_blank\">Kyons Fanpage</a> để được hỗ trợ kịp thời!\r\n      </span>\r\n      <button (click)=\"resendVerificationEmailError = false\" class=\"btn w-full\">Mình đã hiểu</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","export enum FormControlStatus {\r\n  VALID = 'VALID',\r\n  INVALID = 'INVALID',\r\n  PENDING = 'PENDING',\r\n  DISABLED = 'DISABLED',\r\n}\r\n"],"names":["AuthCredential","constructor","email","password","toJson","username","AngularFireMessaging","MessagingService","messaging","requestPermission","getToken","_","i0","ɵɵinject","i1","_2","factory","ɵfac","providedIn","CommonModule","Location","ElementRef","inject","FormBuilder","FormControl","FormsModule","ReactiveFormsModule","Validators","Router","RouterModule","RedirectAfterLogin","environment","AccountStandaloneService","AuthService","LoadingOverlayService","NavigationService","notificationServiceProvider","UserService","FormControlStatus","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","SignInComponent_div_17_div_1_Template","ɵɵadvance","ɵɵproperty","ctx_r1","errors","ɵɵelement","ɵɵlistener","SignInComponent_div_40_Template_button_click_16_listener","ɵɵrestoreView","_r10","ctx_r9","ɵɵnextContext","ɵɵresetView","userNotConfirmedError","ctx_r6","paths","signIn","path","SignInComponent_div_41_Template_button_click_11_listener","_r12","ctx_r11","resendVerificationEmailError","SignInComponent","location","navService","fb","authService","router","loading","userService","messagingService","accountService","class","signInForm","group","required","errorMessage","processing","isDebug","showPassword","isEdited","isPromotionEnable","ngOnInit","addControl","get","valueChanges","subscribe","ngOnDestroy","hide","ngAfterViewInit","emailElm","nativeElement","focus","login","setValue","dirty","markAsDirty","status","VALID","value","next","result","success","replaceState","redirectPath","getRouteAfterLogin","redirect_after_auth","HomeAppTutorial","setForceCompleteTutorial","show","production","console","log","token","setTimeout","navigate","error","error_code","debug","resend","resendVerificationEmail","resendVerified","selectors","viewQuery","SignInComponent_Query","rf","ctx","ɵɵStandaloneFeature","decls","vars","consts","template","SignInComponent_Template","SignInComponent_Template_img_dblclick_9_listener","SignInComponent_div_17_Template","SignInComponent_Template_div_click_21_listener","SignInComponent_i_22_Template","SignInComponent_i_23_Template","SignInComponent_div_24_Template","SignInComponent_Template_button_click_25_listener","SignInComponent_div_40_Template","SignInComponent_div_41_Template","invalid","ɵɵtextInterpolate1","resetPassword","signUp","NgIf","i2","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i3","RouterLink","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}