{"version":3,"file":"apps_student_src_app_presentation_pages_sign-in_sign-in_component_ts.ed23e778d0db92e1.js","mappings":";;;;;;;;;;;;;AAEM,MAAOA,cAAc;EAIzBC,YAAY;IAAEC,KAAK;IAAEC;EAAQ,CAAuC;IAClE,IAAI,CAACD,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;EAC1B;EAEAC,MAAMA,CAAA;IACJ,OAAO;MACLC,QAAQ,EAAE,IAAI,CAACH,KAAK;MACpBC,QAAQ,EAAE,IAAI,CAACA;KAChB;EACH;;;;;;;;;;;;;;;;;ACfoE;;;AAKhE,MAAOI,gBAAgB;EAC3BN,YAAoBO,SAA+B;IAA/B,KAAAA,SAAS,GAATA,SAAS;IAC3B;EACF;;EAEAC,iBAAiBA,CAAA;IACf,OAAO,IAAI,CAACD,SAAS,CAACC,iBAAiB;EACzC;EAEAC,QAAQA,CAAA;IACN,OAAO,IAAI,CAACF,SAAS,CAACE,QAAQ;EAChC;EAAC,QAAAC,CAAA;qBAXUJ,gBAAgB,EAAAK,sDAAA,CAAAE,gFAAA;EAAA;EAAA,QAAAC,EAAA;WAAhBR,gBAAgB;IAAAS,OAAA,EAAhBT,gBAAgB,CAAAU,IAAA;IAAAC,UAAA,EAFf;EAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJqC;AAC+D;AACL;AAC5D;AACY;AACX;AACwB;AAChB;AACC;AACe;AACE;AACA;AACc;AAChC;AAChB;AACF;;;;;;;;ICDhCN,6DAAA,cAAmD;IAAAA,qDAAA,2EAA+C;IAAAA,2DAAA,EAAM;;;;;IAD1GA,6DAAA,UAAuC;IACrCA,yDAAA,IAAAgC,qCAAA,kBAAwG;IAC1GhC,2DAAA,EAAM;;;;IADgBA,wDAAA,GAA6B;IAA7BA,yDAAA,SAAAmC,MAAA,CAAA7C,KAAA,CAAA8C,MAAA,kBAAAD,MAAA,CAAA7C,KAAA,CAAA8C,MAAA,UAA6B;;;;;IAejDpC,wDAAA,YAAoE;;;;;IACpEA,wDAAA,YAAkE;;;;;IAIxEA,6DAAA,cAAwC;IAAAA,qDAAA,mDAAwB;IAAAA,2DAAA,EAAM;;;;;IAmCvBA,qDAAA,GAAkB;;;;IAAlBA,iEAAA,MAAAuC,MAAA,CAAAC,SAAA,OAAkB;;;;;;IAhBzExC,6DAAA,cAGC;IAEGA,wDAAA,cAAoD;IACpDA,6DAAA,cAAyD;IAC1BA,qDAAA,6FAAoC;IAAAA,2DAAA,EAAK;IACtEA,6DAAA,cAAiC;IAE5BA,qDAAA,mGAA0C;IAAAA,6DAAA,aAAQ;IAAAA,qDAAA,2EAA2B;IAAAA,2DAAA,EAAS;IAACA,qDAAA,wGAClE;IAAAA,2DAAA,EACvB;IACDA,6DAAA,YAAM;IAAAA,qDAAA,wLAAiF;IAAAA,2DAAA,EAAO;IAEhGA,6DAAA,kBAAuE;IAAnDA,yDAAA,mBAAA0C,yDAAA;MAAA1C,4DAAA,CAAA4C,IAAA;MAAA,MAAAC,OAAA,GAAA7C,4DAAA;MAAA,OAASA,0DAAA,CAAA6C,OAAA,CAAAG,MAAA,EAAQ;IAAA,EAAC;IACpChD,qDAAA,oDAAuB;IAAAA,yDAAA,KAAAiD,8CAAA,OAA2C;IACpEjD,2DAAA,EAAS;IACTA,6DAAA,kBAAwE;IAAxCA,yDAAA,mBAAAkD,yDAAA;MAAAlD,4DAAA,CAAA4C,IAAA;MAAA,MAAAO,OAAA,GAAAnD,4DAAA;MAAA,OAAAA,0DAAA,CAAAmD,OAAA,CAAAC,qBAAA,GAAiC,KAAK;IAAA,EAAC;IAACpD,qDAAA,8CAAkB;IAAAA,2DAAA,EAAS;;;;IAH5DA,wDAAA,IAA+B;IAA/BA,yDAAA,aAAAqD,MAAA,CAAAC,kBAAA,CAA+B;IAC7CtD,wDAAA,GAA2C;IAA3CA,4DAAA,KAAAqD,MAAA,CAAAC,kBAAA,WAA2C;;;;;;IAM1EtD,6DAAA,cAGC;IAEGA,wDAAA,cAAgD;IAChDA,6DAAA,cAA8B;IACJA,qDAAA,wCAAa;IAAAA,2DAAA,EAAK;IAC1CA,6DAAA,WAAM;IACJA,qDAAA,qKACA;IAAAA,6DAAA,YAA2D;IAAAA,qDAAA,oBAAa;IAAAA,2DAAA,EAAI;IAACA,qDAAA,+EAC/E;IAAAA,2DAAA,EAAO;IACPA,6DAAA,kBAA0E;IAAlEA,yDAAA,mBAAAwD,yDAAA;MAAAxD,4DAAA,CAAAyD,IAAA;MAAA,MAAAC,OAAA,GAAA1D,4DAAA;MAAA,OAAAA,0DAAA,CAAA0D,OAAA,CAAAC,4BAAA,GAAwC,KAAK;IAAA,EAAC;IAAoB3D,qDAAA,wCAAY;IAAAA,2DAAA,EAAS;;;AD/D/F,MAAO4D,eAAe;EAP5BvE,YAAA;IAQE,KAAAwE,QAAQ,GAAGnD,sDAAM,CAACF,sDAAQ,CAAC;IAC3B,KAAAsD,UAAU,GAAGpD,sDAAM,CAACa,4FAAiB,CAAC;IACtC,KAAAwC,KAAK,GAAG,IAAI,CAACD,UAAU,CAACC,KAAK;IAC7B,KAAAC,EAAE,GAAGtD,sDAAM,CAACC,wDAAW,CAAC;IACxB,KAAAsD,WAAW,GAAGvD,sDAAM,CAACW,0EAAW,CAAC;IACjC,KAAA6C,MAAM,GAAGxD,sDAAM,CAACM,oDAAM,CAAC;IACvB,KAAAmD,OAAO,GAAGzD,sDAAM,CAACY,0FAAqB,CAAC;IACvC,KAAA8C,WAAW,GAAG1D,sDAAM,CAACe,0EAAW,CAAC;IACjC,KAAA4C,gBAAgB,GAAG3D,sDAAM,CAACf,4FAAgB,CAAC;IAC3C,KAAA2E,cAAc,GAAG5D,sDAAM,CAACU,0FAAwB,CAAC;IAE3B,KAAAmD,KAAK,GAAG,QAAQ;IAEtC,KAAAC,UAAU,GAAc,IAAI,CAACR,EAAE,CAACS,KAAK,CAAC,EAAE,CAAC;IACzC,KAAAnF,KAAK,GAAgB,IAAIsB,wDAAW,CAAC,EAAE,EAAE,CAACG,uDAAU,CAAC2D,QAAQ,EAAE3D,uDAAU,CAACzB,KAAK,CAAC,CAAC;IACjF,KAAAC,QAAQ,GAAgB,IAAIqB,wDAAW,CAAC,EAAE,EAAEG,uDAAU,CAAC2D,QAAQ,CAAC;IAChE,KAAAC,YAAY,GAAG,KAAK;IACpB,KAAAC,UAAU,GAAG,KAAK;IAClB,KAAAC,OAAO,GAAG,KAAK;IACf,KAAAC,YAAY,GAAG,KAAK;IACpB,KAAAC,QAAQ,GAAG,KAAK;IAEhB,KAAAC,iBAAiB,GAAG7D,kEAAW,CAAC6D,iBAAiB;IACjD,KAAA5B,qBAAqB,GAAG,KAAK;IAC7B,KAAAO,4BAA4B,GAAG,KAAK;IACpC,KAAAL,kBAAkB,GAAG,KAAK;IAC1B,KAAAd,SAAS,GAAG,EAAE;;EAKdyC,QAAQA,CAAA;IACN,IAAI,CAACT,UAAU,CAACU,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC5F,KAAK,CAAC;IAC/C,IAAI,CAACkF,UAAU,CAACU,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC3F,QAAQ,CAAC;IACrD,IAAI,CAACiF,UAAU,CAACW,GAAG,CAAC,OAAO,CAAC,EAAEC,YAAY,CAACC,SAAS,CAAC,MAAK;MACxD,IAAI,CAACV,YAAY,GAAG,KAAK;IAC3B,CAAC,CAAC;IACF,IAAI,CAACH,UAAU,CAACW,GAAG,CAAC,UAAU,CAAC,EAAEC,YAAY,CAACC,SAAS,CAAC,MAAK;MAC3D,IAAI,CAACV,YAAY,GAAG,KAAK;IAC3B,CAAC,CAAC;EACJ;EAEAW,WAAWA,CAAA;IACT,IAAI,CAACnB,OAAO,CAACoB,IAAI,EAAE;IACnB,IAAI,IAAI,CAACC,SAAS,KAAKC,SAAS,EAAE,IAAI,CAACD,SAAS,CAACE,WAAW,EAAE;EAChE;EAEAC,eAAeA,CAAA;IACb,IAAI,CAACC,QAAQ,CAACC,aAAa,CAACC,KAAK,EAAE;EACrC;EAEAC,KAAKA,CAAA;IACH,IAAI,IAAI,CAAClB,OAAO,EAAE;MAChB,IAAI,CAACvF,KAAK,CAAC0G,QAAQ,CAAC,2BAA2B,CAAC;MAChD,IAAI,CAACzG,QAAQ,CAACyG,QAAQ,CAAC,UAAU,CAAC;;IAEpC,IAAI,CAAC,IAAI,CAACjB,QAAQ,EAAE,IAAI,CAACA,QAAQ,GAAG,IAAI;IACxC,IAAI,EAAE,IAAI,CAACP,UAAU,CAACW,GAAG,CAAC,OAAO,CAAC,EAAEc,KAAK,IAAI,IAAI,CAACzB,UAAU,CAACW,GAAG,CAAC,UAAU,CAAC,EAAEc,KAAK,CAAC,EAAE;MACpF,IAAI,CAACzB,UAAU,CAACW,GAAG,CAAC,OAAO,CAAC,EAAEe,WAAW,EAAE;MAC3C,IAAI,CAAC1B,UAAU,CAACW,GAAG,CAAC,UAAU,CAAC,EAAEe,WAAW,EAAE;MAC9C;;IAEF,IAAI,IAAI,CAAC1B,UAAU,CAAC2B,MAAM,KAAKzE,2DAAiB,CAAC0E,KAAK,EAAE;MACtD,IAAI,CAACxB,UAAU,GAAG,IAAI;MACtB,IAAI,CAACX,WAAW,CAACoC,MAAM,CAAC,IAAIjH,2EAAc,CAAC,IAAI,CAACoF,UAAU,CAAC8B,KAAK,CAAC,CAAC,CAACjB,SAAS,CAAC;QAC3EkB,IAAI,EAAEC,MAAM,IAAG;UACb,IAAIA,MAAM,CAACC,OAAO,EAAE;YAClB,IAAI,CAAC5C,QAAQ,CAAC6C,YAAY,CAAC,GAAG,CAAC;YAC/B,MAAMC,YAAY,GAAG,IAAI,CAAC7C,UAAU,CAAC8C,kBAAkB,CAACJ,MAAM,CAACK,mBAAmB,CAAC;YACnF,IAAIL,MAAM,CAACK,mBAAmB,IAAI3F,6EAAkB,CAACA,6EAAkB,CAAC4F,eAAe,CAAC,EAAE;cACxF,IAAI,CAAC1C,WAAW,CAAC2C,wBAAwB,EAAE;;YAE7C,IAAI,CAAC5C,OAAO,CAAC6C,IAAI,EAAE;YACnB,IAAI7F,kEAAW,CAAC8F,UAAU,EACxB,IAAI,CAAC5C,gBAAgB,CAACxE,iBAAiB,EAAE,CAACwF,SAAS,CAAC;cAClDkB,IAAI,EAAED,KAAK,IAAG;gBACZY,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEb,KAAK,CAAC;gBAC5C,IAAI,CAACjC,gBAAgB,CAACvE,QAAQ,EAAE,CAACuF,SAAS,CAAC;kBACzCkB,IAAI,EAAEa,KAAK,IAAG;oBACZF,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEC,KAAK,CAAC;oBAEnCC,UAAU,CAAC,MAAK;sBACd,IAAI,CAACnD,MAAM,CAACoD,QAAQ,CAAC,CAACX,YAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,YAAY,CAAC,CAAC,CAAC,CAAC;oBAC1D,CAAC,EAAE,GAAG,CAAC;kBACT,CAAC;kBACDY,KAAK,EAAEA,KAAK,IAAG;oBACbL,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEI,KAAK,CAAC;kBACtC;iBACD,CAAC;cACJ,CAAC;cACDA,KAAK,EAAEA,KAAK,IAAG;gBACbL,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEI,KAAK,CAAC;cAC/C;aACD,CAAC,CAAC,KACA;cACHF,UAAU,CAAC,MAAK;gBACd,IAAI,CAACnD,MAAM,CAACoD,QAAQ,CAAC,CAACX,YAAY,CAAC,CAAC,CAAC,CAAC,EAAEA,YAAY,CAAC,CAAC,CAAC,CAAC;cAC1D,CAAC,EAAE,GAAG,CAAC;;WAEV,MAAM;YACL,IAAI,CAAC/B,UAAU,GAAG,KAAK;YACvB,IAAI,CAACD,YAAY,GAAG,IAAI;YACxB,IAAI,CAACR,OAAO,CAACoB,IAAI,EAAE;YACnB,IAAIiB,MAAM,CAACgB,UAAU,IAAI,2BAA2B,EAAE;cACpD,IAAI,CAACpE,qBAAqB,GAAG,IAAI;;;QAGvC,CAAC;QACDmE,KAAK,EAAEA,CAAA,KAAK;UACV;UACA,IAAI,CAAC5C,YAAY,GAAG,IAAI;UACxB,IAAI,CAACC,UAAU,GAAG,KAAK;UACvB,IAAI,CAACT,OAAO,CAACoB,IAAI,EAAE;QACrB;OACD,CAAC;;EAEN;EAEAkC,KAAKA,CAAA;IACH,IAAI,CAACtG,kEAAW,CAAC8F,UAAU,EAAE,IAAI,CAACpC,OAAO,GAAG,IAAI;EAClD;EAEA7B,MAAMA,CAAA;IACJ,IAAI,CAACM,kBAAkB,GAAG,IAAI;IAC9B,MAAMoE,eAAe,GAAG/F,+CAAQ,CAAC,IAAI,CAAC;IACtC,IAAI,CAAC6D,SAAS,GAAGkC,eAAe,CAACrC,SAAS,CAAC,MAAK;MAC9C,IAAI,CAAC7C,SAAS,EAAE;MAChB,IAAI,IAAI,CAACA,SAAS,IAAI,CAAC,EAAE;QACvB,IAAI,CAACc,kBAAkB,GAAG,KAAK;;IAEnC,CAAC,CAAC;IACF,IAAI,CAACgB,cAAc,CAACqD,uBAAuB,CAAC,IAAI,CAACrI,KAAK,CAACgH,KAAK,CAAC,CAACjB,SAAS,CAAC;MACtEkB,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACrC,MAAM,CAACoD,QAAQ,CAAC,CAAC,IAAI,CAACvD,KAAK,CAAC6D,cAAc,CAACC,IAAI,CAAC,CAAC;MACxD,CAAC;MACDN,KAAK,EAAEA,CAAA,KAAK;QACV,IAAI,CAAC5D,4BAA4B,GAAG,IAAI;MAC1C;KACD,CAAC;EACJ;EAAC,QAAA5D,CAAA;qBA5IU6D,eAAe;EAAA;EAAA,QAAAzD,EAAA;UAAfyD,eAAe;IAAAkE,SAAA;IAAAC,SAAA,WAAAC,sBAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;;;;;;;;;;;;;iFAJf,CAACzG,0GAA2B,CAAC,GAAAxB,kEAAA;IAAAoI,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,yBAAAP,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCpB1CjI,6DAAA,aAAoE;QAEhEA,wDAAA,aAA0F;QAC1FA,6DAAA,cAA+C;QAAAA,qDAAA,oDAAoB;QAAAA,wDAAA,SAAM;QAAAA,qDAAA,gCAAU;QAAAA,2DAAA,EAAO;QAE5FA,6DAAA,aAAgF;QAEvEA,yDAAA,sBAAAyI,iDAAA;UAAA,OAAYP,GAAA,CAAAT,KAAA,EAAO;QAAA,EAAC;QAAzBzH,2DAAA,EAA+G;QAC/GA,6DAAA,eAAwD;QAClDA,qDAAA,kDAAsB;QAAAA,2DAAA,EAAK;QAC/BA,6DAAA,cAAuB;QAEnBA,wDAAA,qBAAgF;QAChFA,yDAAA,KAAA0I,+BAAA,kBAEM;QACR1I,2DAAA,EAAM;QACNA,6DAAA,eAA6B;QAC3BA,wDAAA,qBAME;QACFA,6DAAA,eAGC;QAFCA,yDAAA,mBAAA2I,+CAAA;UAAA,OAAAT,GAAA,CAAApD,YAAA,IAAAoD,GAAA,CAAApD,YAAA;QAAA,EAAsC;QAGtC9E,yDAAA,KAAA4I,6BAAA,gBAAoE,KAAAC,6BAAA;QAEtE7I,2DAAA,EAAM;QAGVA,yDAAA,KAAA8I,+BAAA,kBAAsE;QACtE9I,6DAAA,kBAA8D;QAAtDA,yDAAA,mBAAA+I,kDAAA;UAAA,OAASb,GAAA,CAAAnC,KAAA,EAAO;QAAA,EAAC;QACvB/F,qDAAA,IACF;QAAAA,2DAAA,EAAS;QACTA,6DAAA,eAAmC;QAC8BA,qDAAA,oCAAa;QAAAA,2DAAA,EAAI;QAChFA,6DAAA,YACG;QAAAA,qDAAA,+DACD;QAAAA,6DAAA,aAAwD;QAAAA,qDAAA,qDAAe;QAAAA,2DAAA,EAAI;QAMrFA,6DAAA,eAA2F;QACzFA,wDAAA,eAAqG;QACrGA,6DAAA,gBAAwE;QAAAA,qDAAA,6CAAiB;QAAAA,wDAAA,UAAM;QAAAA,qDAAA,yCAAa;QAAAA,2DAAA,EAAO;QAGvHA,yDAAA,KAAAgJ,+BAAA,mBAqBM,KAAAC,+BAAA;;;QAlEMjJ,wDAAA,IAAwB;QAAxBA,yDAAA,cAAAkI,GAAA,CAAA1D,UAAA,CAAwB;QAKlBxE,wDAAA,GAA+B;QAA/BA,yDAAA,SAAAkI,GAAA,CAAA5I,KAAA,CAAA4J,OAAA,IAAAhB,GAAA,CAAAnD,QAAA,CAA+B;QAOnC/E,wDAAA,GAA2C;QAA3CA,yDAAA,SAAAkI,GAAA,CAAApD,YAAA,uBAA2C;QASvC9E,wDAAA,GAAkB;QAAlBA,yDAAA,SAAAkI,GAAA,CAAApD,YAAA,CAAkB;QAClB9E,wDAAA,GAAmB;QAAnBA,yDAAA,UAAAkI,GAAA,CAAApD,YAAA,CAAmB;QAIT9E,wDAAA,GAAkB;QAAlBA,yDAAA,SAAAkI,GAAA,CAAAvD,YAAA,CAAkB;QACA3E,wDAAA,GAAuB;QAAvBA,yDAAA,aAAAkI,GAAA,CAAAtD,UAAA,CAAuB;QAC3D5E,wDAAA,GACF;QADEA,iEAAA,MAAAkI,GAAA,CAAAtD,UAAA,iEACF;QAEK5E,wDAAA,GAAuC;QAAvCA,yDAAA,eAAAkI,GAAA,CAAAnE,KAAA,CAAAoF,aAAA,CAAAtB,IAAA,CAAuC;QAGrC7H,wDAAA,GAAgC;QAAhCA,yDAAA,eAAAkI,GAAA,CAAAnE,KAAA,CAAAqF,MAAA,CAAAvB,IAAA,CAAgC;QAY5C7H,wDAAA,GAA2B;QAA3BA,yDAAA,SAAAkI,GAAA,CAAA9E,qBAAA,CAA2B;QAsB3BpD,wDAAA,GAAkC;QAAlCA,yDAAA,SAAAkI,GAAA,CAAAvE,4BAAA,CAAkC;;;mBDzDzBpD,0DAAY,EAAAL,kDAAA,EAAEW,wDAAW,EAAAyI,6DAAA,EAAAA,iEAAA,EAAAA,4DAAA,EAAAA,iEAAA,EAAExI,gEAAmB,EAAAwI,+DAAA,EAAAA,4DAAA,EAAErI,0DAAY,EAAA4I,wDAAA;IAAAE,MAAA;EAAA;;;;;;;;;;;;;;;AEnBjE,IAAKrI,iBAKX;AALD,WAAYA,iBAAiB;EAC3BA,iBAAA,mBAAe;EACfA,iBAAA,uBAAmB;EACnBA,iBAAA,uBAAmB;EACnBA,iBAAA,yBAAqB;AACvB,CAAC,EALWA,iBAAiB,KAAjBA,iBAAiB","sources":["./apps/student/src/app/infrastructure/auth/credential.ts","./apps/student/src/app/infrastructure/notification/messaging.service.ts","./apps/student/src/app/presentation/pages/sign-in/sign-in.component.ts","./apps/student/src/app/presentation/pages/sign-in/sign-in.component.html","./apps/student/src/app/utils/form.ts"],"sourcesContent":["import { IAuthCredential } from '@domain/auth/i-auth-service';\r\n\r\nexport class AuthCredential implements IAuthCredential {\r\n  email: string;\r\n  password: string;\r\n\r\n  constructor({ email, password }: { email: string; password: string }) {\r\n    this.email = email;\r\n    this.password = password;\r\n  }\r\n\r\n  toJson() {\r\n    return {\r\n      username: this.email,\r\n      password: this.password,\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { AngularFireMessaging } from '@angular/fire/compat/messaging';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MessagingService {\n  constructor(private messaging: AngularFireMessaging) {\n    // Get the current FCM token\n  }\n\n  requestPermission() {\n    return this.messaging.requestPermission;\n  }\n\n  getToken() {\n    return this.messaging.getToken;\n  }\n}\n","import { CommonModule, Location } from '@angular/common';\r\nimport { AfterViewInit, Component, ElementRef, HostBinding, OnDestroy, OnInit, ViewChild, inject } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { Router, RouterModule } from '@angular/router';\r\nimport { RedirectAfterLogin } from '@domain/navigation/i-redirect';\r\nimport { environment } from '@environments/environment';\r\nimport { AccountStandaloneService } from '@infrastructure/auth/account.service';\r\nimport { AuthService } from '@infrastructure/auth/auth.service';\r\nimport { AuthCredential } from '@infrastructure/auth/credential';\r\nimport { LoadingOverlayService } from '@infrastructure/loading-overlay.service';\r\nimport { NavigationService } from '@infrastructure/navigation/navigation.service';\r\nimport { MessagingService } from '@infrastructure/notification/messaging.service';\r\nimport { notificationServiceProvider } from '@infrastructure/notification/notification.service';\r\nimport { UserService } from '@infrastructure/user/user.service';\r\nimport { FormControlStatus } from '@utils/form';\r\nimport { Subscription, interval } from 'rxjs';\r\n\r\n@Component({\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, RouterModule],\r\n  providers: [notificationServiceProvider],\r\n  templateUrl: './sign-in.component.html',\r\n  styleUrls: ['./sign-in.component.scss'],\r\n})\r\nexport class SignInComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  location = inject(Location);\r\n  navService = inject(NavigationService);\r\n  paths = this.navService.paths;\r\n  fb = inject(FormBuilder);\r\n  authService = inject(AuthService);\r\n  router = inject(Router);\r\n  loading = inject(LoadingOverlayService);\r\n  userService = inject(UserService);\r\n  messagingService = inject(MessagingService);\r\n  accountService = inject(AccountStandaloneService);\r\n\r\n  @HostBinding('class') class = 'h-full';\r\n\r\n  signInForm: FormGroup = this.fb.group({});\r\n  email: FormControl = new FormControl('', [Validators.required, Validators.email]);\r\n  password: FormControl = new FormControl('', Validators.required);\r\n  errorMessage = false;\r\n  processing = false;\r\n  isDebug = false;\r\n  showPassword = false;\r\n  isEdited = false;\r\n\r\n  isPromotionEnable = environment.isPromotionEnable;\r\n  userNotConfirmedError = false;\r\n  resendVerificationEmailError = false;\r\n  pendingResendEmail = false;\r\n  countdown = 30;\r\n  $interval!: Subscription;\r\n\r\n  @ViewChild('emailElm') emailElm!: ElementRef;\r\n\r\n  ngOnInit(): void {\r\n    this.signInForm.addControl('email', this.email);\r\n    this.signInForm.addControl('password', this.password);\r\n    this.signInForm.get('email')?.valueChanges.subscribe(() => {\r\n      this.errorMessage = false;\r\n    });\r\n    this.signInForm.get('password')?.valueChanges.subscribe(() => {\r\n      this.errorMessage = false;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loading.hide();\r\n    if (this.$interval !== undefined) this.$interval.unsubscribe();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.emailElm.nativeElement.focus();\r\n  }\r\n\r\n  login() {\r\n    if (this.isDebug) {\r\n      this.email.setValue('binhhm2009+0801@gmail.com');\r\n      this.password.setValue('Sx_-2m5c');\r\n    }\r\n    if (!this.isEdited) this.isEdited = true;\r\n    if (!(this.signInForm.get('email')?.dirty && this.signInForm.get('password')?.dirty)) {\r\n      this.signInForm.get('email')?.markAsDirty();\r\n      this.signInForm.get('password')?.markAsDirty();\r\n      return;\r\n    }\r\n    if (this.signInForm.status === FormControlStatus.VALID) {\r\n      this.processing = true;\r\n      this.authService.signIn(new AuthCredential(this.signInForm.value)).subscribe({\r\n        next: result => {\r\n          if (result.success) {\r\n            this.location.replaceState('/');\r\n            const redirectPath = this.navService.getRouteAfterLogin(result.redirect_after_auth);\r\n            if (result.redirect_after_auth == RedirectAfterLogin[RedirectAfterLogin.HomeAppTutorial]) {\r\n              this.userService.setForceCompleteTutorial();\r\n            }\r\n            this.loading.show();\r\n            if (environment.production)\r\n              this.messagingService.requestPermission().subscribe({\r\n                next: value => {\r\n                  console.log('requestPermission next', value);\r\n                  this.messagingService.getToken().subscribe({\r\n                    next: token => {\r\n                      console.log('getToken next', token);\r\n\r\n                      setTimeout(() => {\r\n                        this.router.navigate([redirectPath[0]], redirectPath[1]);\r\n                      }, 600);\r\n                    },\r\n                    error: error => {\r\n                      console.log('getToken error', error);\r\n                    },\r\n                  });\r\n                },\r\n                error: error => {\r\n                  console.log('requestPermission error', error);\r\n                },\r\n              });\r\n            else {\r\n              setTimeout(() => {\r\n                this.router.navigate([redirectPath[0]], redirectPath[1]);\r\n              }, 600);\r\n            }\r\n          } else {\r\n            this.processing = false;\r\n            this.errorMessage = true;\r\n            this.loading.hide();\r\n            if (result.error_code == 'UserNotConfirmedException') {\r\n              this.userNotConfirmedError = true;\r\n            }\r\n          }\r\n        },\r\n        error: () => {\r\n          // TODO: Define error resposes\r\n          this.errorMessage = true;\r\n          this.processing = false;\r\n          this.loading.hide();\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  debug() {\r\n    if (!environment.production) this.isDebug = true;\r\n  }\r\n\r\n  resend() {\r\n    this.pendingResendEmail = true;\r\n    const requestInterval = interval(1000);\r\n    this.$interval = requestInterval.subscribe(() => {\r\n      this.countdown--;\r\n      if (this.countdown == 0) {\r\n        this.pendingResendEmail = false;\r\n      }\r\n    });\r\n    this.accountService.resendVerificationEmail(this.email.value).subscribe({\r\n      next: () => {\r\n        this.router.navigate([this.paths.resendVerified.path]);\r\n      },\r\n      error: () => {\r\n        this.resendVerificationEmailError = true;\r\n      },\r\n    });\r\n  }\r\n}\r\n","<div class=\"flex-col md:flex md:flex-row h-full md:overflow-hidden\">\r\n  <div class=\"col md:hidden hero-bg py-8 px-6 gap-2\" style=\"height: calc(100vw * 204 / 375)\">\r\n    <img src=\"/assets/images/logo-horizontal-light.webp\" alt=\"\" class=\"self-start h-[32px]\" />\r\n    <span class=\"h7 text-white w-full text-center\">Tri thức khởi đầu từ<br />“Tại sao”?</span>\r\n  </div>\r\n  <div class=\"background-image flex w-full h-full md:items-center justify-center\">\r\n    <div class=\"flex flex-col w-full md:w-[434px] min-h-[338px] p-6 mb-24 gap-6 overflow-auto flex-shrink-0\">\r\n      <img (dblclick)=\"debug()\" src=\"/assets/images/logo-h.svg\" alt=\"Logo\" class=\"h-12 self-start hidden md:block\" />\r\n      <form [formGroup]=\"signInForm\" class=\"col gap-6 w-full\">\r\n        <h4>Mừng bạn quay trở lại!</h4>\r\n        <div class=\"col gap-2\">\r\n          <div class=\"col w-full\">\r\n            <input type=\"text\" #emailElm placeholder=\"Nhập email\" formControlName=\"email\" />\r\n            <div *ngIf=\"email.invalid && isEdited\">\r\n              <div class=\"error\" *ngIf=\"email.errors?.['email']\">Vui lòng nhập theo định dạng abc&#64;email.com.</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"relative w-full\">\r\n            <input\r\n              #passwordElm\r\n              [type]=\"showPassword ? 'text' : 'password'\"\r\n              class=\"w-full\"\r\n              placeholder=\"Nhập mật khẩu\"\r\n              formControlName=\"password\"\r\n            />\r\n            <div\r\n              (click)=\"showPassword = !showPassword\"\r\n              class=\"absolute right-0 top-0 w-11 h-full flex items-center justify-center cursor-pointer\"\r\n            >\r\n              <i *ngIf=\"showPassword\" class=\"icon-VisibilityOff\" tabindex=\"0\"></i>\r\n              <i *ngIf=\"!showPassword\" class=\"icon-Visibility\" tabindex=\"0\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"error\" *ngIf=\"errorMessage\">Thông tin chưa chính xác</div>\r\n        <button (click)=\"login()\" class=\"btn\" [disabled]=\"processing\">\r\n          {{ processing ? 'Đang xử lý' : 'Đăng nhập' }}\r\n        </button>\r\n        <div class=\"col items-start gap-2\">\r\n          <a [routerLink]=\"paths.resetPassword.path\" class=\"text-orange\">Quên mật khẩu</a>\r\n          <span\r\n            >Bạn chưa có tài khoản? &nbsp;\r\n            <a [routerLink]=\"paths.signUp.path\" class=\"text-orange\">Đăng ký tại đây</a></span\r\n          >\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n  <div class=\"hero-img hidden md:flex justify-center flex-shrink-0 overflow-hidden relative\">\r\n    <img class=\"w-full h-full object-cover absolute top-0\" src=\"/assets/images/hero-image.webp\" alt=\"\" />\r\n    <span class=\"text-white text-[36px] font-semibold text-center relative\">Tri thức khởi đầu<br />từ “Tại sao”?</span>\r\n  </div>\r\n</div>\r\n<div\r\n  *ngIf=\"userNotConfirmedError\"\r\n  class=\"bg-blueGrey-100 absolute top-0 left-0 w-screen h-screen flex items-center justify-center p-6\"\r\n>\r\n  <div class=\"flex flex-col items-center justify-center w-full sm:w-[493px] gap-6\">\r\n    <img src=\"assets/images/Account Not Verified.svg\" />\r\n    <div class=\"bg-white rounded-sm p-6 flex flex-col gap-6\">\r\n      <h4 class=\"text-primaryBlue\">Tài khoản của bạn chưa được xác thực</h4>\r\n      <div class=\"flex flex-col gap-2\">\r\n        <span\r\n          >Để có thể sử dụng ứng dụng Kyons, bạn cần <strong>nhấp vào đường dẫn xác thực</strong> đã được gửi trong\r\n          email đăng ký của bạn.</span\r\n        >\r\n        <span>Ngoài ra, bạn có thể yêu cầu gửi lại link xác thực bằng cách bấm vào nút dưới đây</span>\r\n      </div>\r\n      <button class=\"btn\" (click)=\"resend()\" [disabled]=\"pendingResendEmail\">\r\n        Gửi lại email xác thực @if(pendingResendEmail){({{ countdown }}s)}\r\n      </button>\r\n      <button class=\"btn btn-rounded\" (click)=\"userNotConfirmedError = false\">Quay lại đăng nhập</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div\r\n  *ngIf=\"resendVerificationEmailError\"\r\n  class=\"absolute top-0 left-0 w-full h-screen bg-black bg-opacity-80 flex items-center justify-center\"\r\n>\r\n  <div class=\"col rounded-2xl bg-white gap-6 p-6 w-full md:w-[700px] items-center\">\r\n    <img src=\"/assets/images/warning.webp\" alt=\"\" />\r\n    <div class=\"col w-full gap-6\">\r\n      <h5 class=\"text-center\">Chú ý! Chú ý!</h5>\r\n      <span>\r\n        Hệ thống hiện đang gặp sự cố, bạn vui lòng thử lại sau vài phút hoặc liên hệ\r\n        <a href=\"https://www.facebook.com/KyonsVN\" target=\"_blank\">Kyons Fanpage</a> để được hỗ trợ kịp thời!\r\n      </span>\r\n      <button (click)=\"resendVerificationEmailError = false\" class=\"btn w-full\">Mình đã hiểu</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","export enum FormControlStatus {\r\n  VALID = 'VALID',\r\n  INVALID = 'INVALID',\r\n  PENDING = 'PENDING',\r\n  DISABLED = 'DISABLED',\r\n}\r\n"],"names":["AuthCredential","constructor","email","password","toJson","username","AngularFireMessaging","MessagingService","messaging","requestPermission","getToken","_","i0","ɵɵinject","i1","_2","factory","ɵfac","providedIn","CommonModule","Location","ElementRef","inject","FormBuilder","FormControl","FormsModule","ReactiveFormsModule","Validators","Router","RouterModule","RedirectAfterLogin","environment","AccountStandaloneService","AuthService","LoadingOverlayService","NavigationService","notificationServiceProvider","UserService","FormControlStatus","interval","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","SignInComponent_div_17_div_1_Template","ɵɵadvance","ɵɵproperty","ctx_r1","errors","ɵɵelement","ɵɵtextInterpolate1","ctx_r9","countdown","ɵɵlistener","SignInComponent_div_40_Template_button_click_14_listener","ɵɵrestoreView","_r11","ctx_r10","ɵɵnextContext","ɵɵresetView","resend","SignInComponent_div_40_Conditional_16_Template","SignInComponent_div_40_Template_button_click_17_listener","ctx_r12","userNotConfirmedError","ctx_r6","pendingResendEmail","ɵɵconditional","SignInComponent_div_41_Template_button_click_11_listener","_r14","ctx_r13","resendVerificationEmailError","SignInComponent","location","navService","paths","fb","authService","router","loading","userService","messagingService","accountService","class","signInForm","group","required","errorMessage","processing","isDebug","showPassword","isEdited","isPromotionEnable","ngOnInit","addControl","get","valueChanges","subscribe","ngOnDestroy","hide","$interval","undefined","unsubscribe","ngAfterViewInit","emailElm","nativeElement","focus","login","setValue","dirty","markAsDirty","status","VALID","signIn","value","next","result","success","replaceState","redirectPath","getRouteAfterLogin","redirect_after_auth","HomeAppTutorial","setForceCompleteTutorial","show","production","console","log","token","setTimeout","navigate","error","error_code","debug","requestInterval","resendVerificationEmail","resendVerified","path","selectors","viewQuery","SignInComponent_Query","rf","ctx","ɵɵStandaloneFeature","decls","vars","consts","template","SignInComponent_Template","SignInComponent_Template_img_dblclick_9_listener","SignInComponent_div_17_Template","SignInComponent_Template_div_click_21_listener","SignInComponent_i_22_Template","SignInComponent_i_23_Template","SignInComponent_div_24_Template","SignInComponent_Template_button_click_25_listener","SignInComponent_div_40_Template","SignInComponent_div_41_Template","invalid","resetPassword","signUp","NgIf","i2","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i3","RouterLink","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}