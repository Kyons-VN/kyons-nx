{"version":3,"file":"apps_student_src_app_presentation_pages_sign-in_sign-in_component_ts.564c10d29d207116.js","mappings":"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","sources":["./apps/student/src/app/infrastructure/auth/credential.ts","./apps/student/src/app/infrastructure/notification/messaging.service.ts","./apps/student/src/app/presentation/pages/sign-in/sign-in.component.ts","./apps/student/src/app/presentation/pages/sign-in/sign-in.component.html","./apps/student/src/app/utils/form.ts"],"sourcesContent":["import { IAuthCredential } from '@domain/auth/i-auth-service';\r\n\r\nexport class AuthCredential implements IAuthCredential {\r\n  email: string;\r\n  password: string;\r\n\r\n  constructor({ email, password }: { email: string; password: string }) {\r\n    this.email = email;\r\n    this.password = password;\r\n  }\r\n\r\n  toJson() {\r\n    return {\r\n      username: this.email,\r\n      password: this.password,\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { AngularFireMessaging } from '@angular/fire/compat/messaging';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MessagingService {\n  constructor(private messaging: AngularFireMessaging) {\n    // Get the current FCM token\n  }\n\n  requestPermission() {\n    return this.messaging.requestPermission;\n  }\n\n  getToken() {\n    return this.messaging.getToken;\n  }\n}\n","import { CommonModule, Location } from '@angular/common';\r\nimport { AfterViewInit, Component, ElementRef, HostBinding, OnDestroy, OnInit, ViewChild, inject } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { Router, RouterModule } from '@angular/router';\r\nimport { RedirectAfterLogin } from '@domain/navigation/i-redirect';\r\nimport { environment } from '@environments/environment';\r\nimport { AuthService } from '@infrastructure/auth/auth.service';\r\nimport { AuthCredential } from '@infrastructure/auth/credential';\r\nimport { LoadingOverlayService } from '@infrastructure/loading-overlay.service';\r\nimport { NavigationService } from '@infrastructure/navigation/navigation.service';\r\nimport { MessagingService } from '@infrastructure/notification/messaging.service';\r\nimport { notificationServiceProvider } from '@infrastructure/notification/notification.service';\r\nimport { UserService } from '@infrastructure/user/user.service';\r\nimport { FormControlStatus } from '@utils/form';\r\n\r\n@Component({\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, RouterModule],\r\n  providers: [notificationServiceProvider],\r\n  templateUrl: './sign-in.component.html',\r\n  styleUrls: ['./sign-in.component.scss'],\r\n})\r\nexport class SignInComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  location = inject(Location);\r\n  navService = inject(NavigationService);\r\n  paths = this.navService.paths;\r\n  fb = inject(FormBuilder);\r\n  authService = inject(AuthService);\r\n  router = inject(Router);\r\n  loading = inject(LoadingOverlayService);\r\n  userService = inject(UserService);\r\n  messagingService = inject(MessagingService);\r\n\r\n  @HostBinding('class') class = 'h-full';\r\n\r\n  signInForm: FormGroup = this.fb.group({});\r\n  email: FormControl = new FormControl('', [Validators.required, Validators.email]);\r\n  password: FormControl = new FormControl('', Validators.required);\r\n  errorMessage = false;\r\n  processing = false;\r\n  isDebug = false;\r\n  showPassword = false;\r\n  isEdited = false;\r\n\r\n  isPromotionEnable = environment.isPromotionEnable;\r\n  userNotConfirmedError = false;\r\n\r\n  @ViewChild('emailElm') emailElm!: ElementRef;\r\n\r\n  ngOnInit(): void {\r\n    this.signInForm.addControl('email', this.email);\r\n    this.signInForm.addControl('password', this.password);\r\n    this.signInForm.get('email')?.valueChanges.subscribe(() => {\r\n      this.errorMessage = false;\r\n    });\r\n    this.signInForm.get('password')?.valueChanges.subscribe(() => {\r\n      this.errorMessage = false;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loading.hide();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.emailElm.nativeElement.focus();\r\n  }\r\n\r\n  login() {\r\n    if (this.isDebug) {\r\n      this.email.setValue('binhhm2009+0801@gmail.com');\r\n      this.password.setValue('Sx_-2m5c');\r\n    }\r\n    if (!this.isEdited) this.isEdited = true;\r\n    if (!(this.signInForm.get('email')?.dirty && this.signInForm.get('password')?.dirty)) {\r\n      this.signInForm.get('email')?.markAsDirty();\r\n      this.signInForm.get('password')?.markAsDirty();\r\n      return;\r\n    }\r\n    if (this.signInForm.status === FormControlStatus.VALID) {\r\n      this.processing = true;\r\n      this.authService.signIn(new AuthCredential(this.signInForm.value)).subscribe({\r\n        next: result => {\r\n          if (result.success) {\r\n            this.location.replaceState('/');\r\n            const redirectPath = this.navService.getRouteAfterLogin(result.redirect_after_auth);\r\n            if (result.redirect_after_auth == RedirectAfterLogin[RedirectAfterLogin.HomeAppTutorial]) {\r\n              this.userService.setForceCompleteTutorial();\r\n            }\r\n            this.loading.show();\r\n            if (environment.production)\r\n              this.messagingService.requestPermission().subscribe({\r\n                next: value => {\r\n                  console.log('requestPermission next', value);\r\n                  this.messagingService.getToken().subscribe({\r\n                    next: token => {\r\n                      console.log('getToken next', token);\r\n\r\n                      setTimeout(() => {\r\n                        this.router.navigate([redirectPath[0]], redirectPath[1]);\r\n                      }, 600);\r\n                    },\r\n                    error: error => {\r\n                      console.log('getToken error', error);\r\n                    },\r\n                  });\r\n                },\r\n                error: error => {\r\n                  console.log('requestPermission error', error);\r\n                },\r\n              });\r\n            else {\r\n              setTimeout(() => {\r\n                this.router.navigate([redirectPath[0]], redirectPath[1]);\r\n              }, 600);\r\n            }\r\n          } else {\r\n            this.processing = false;\r\n            this.errorMessage = true;\r\n            this.loading.hide();\r\n            if (result.error_code == 'UserNotConfirmedException') {\r\n              this.userNotConfirmedError = true;\r\n            }\r\n          }\r\n        },\r\n        error: () => {\r\n          // TODO: Define error resposes\r\n          this.errorMessage = true;\r\n          this.processing = false;\r\n          this.loading.hide();\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  debug() {\r\n    if (!environment.production) this.isDebug = true;\r\n  }\r\n}\r\n","<div class=\"flex-col md:flex md:flex-row h-full md:overflow-hidden\">\r\n  <div class=\"col md:hidden hero-bg py-8 px-6 gap-2\" style=\"height: calc(100vw * 204 / 375)\">\r\n    <img src=\"/assets/images/logo-horizontal-light.webp\" alt=\"\" class=\"self-start h-[32px]\" />\r\n    <span class=\"h7 text-white w-full text-center\">Tri thức khởi đầu từ<br />“Tại sao”?</span>\r\n  </div>\r\n  <div class=\"background-image flex w-full h-full md:items-center justify-center\">\r\n    <div class=\"flex flex-col w-full md:w-[434px] min-h-[338px] p-6 mb-24 gap-6 overflow-auto flex-shrink-0\">\r\n      <img (dblclick)=\"debug()\" src=\"/assets/images/logo-h.svg\" alt=\"Logo\" class=\"h-12 self-start hidden md:block\" />\r\n      <form [formGroup]=\"signInForm\" class=\"col gap-6 w-full\">\r\n        <h4>Mừng bạn quay trở lại!</h4>\r\n        <div class=\"col gap-2\">\r\n          <div class=\"col w-full\">\r\n            <input type=\"text\" #emailElm placeholder=\"Nhập email\" formControlName=\"email\" />\r\n            <div *ngIf=\"email.invalid && isEdited\">\r\n              <div class=\"error\" *ngIf=\"email.errors?.['email']\">Vui lòng nhập theo định dạng abc&#64;email.com.</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"relative w-full\">\r\n            <input\r\n              #passwordElm\r\n              [type]=\"showPassword ? 'text' : 'password'\"\r\n              class=\"w-full\"\r\n              placeholder=\"Nhập mật khẩu\"\r\n              formControlName=\"password\"\r\n            />\r\n            <div\r\n              (click)=\"showPassword = !showPassword\"\r\n              class=\"absolute right-0 top-0 w-11 h-full flex items-center justify-center cursor-pointer\"\r\n            >\r\n              <i *ngIf=\"showPassword\" class=\"icon-VisibilityOff\" tabindex=\"0\"></i>\r\n              <i *ngIf=\"!showPassword\" class=\"icon-Visibility\" tabindex=\"0\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"error\" *ngIf=\"errorMessage\">Thông tin chưa chính xác</div>\r\n        <button (click)=\"login()\" class=\"btn\" [disabled]=\"processing\">\r\n          {{ processing ? 'Đang xử lý' : 'Đăng nhập' }}\r\n        </button>\r\n        <div class=\"col items-start gap-2\">\r\n          <a [routerLink]=\"paths.resetPassword.path\" class=\"text-orange\">Quên mật khẩu</a>\r\n          <span\r\n            >Bạn chưa có tài khoản? &nbsp;\r\n            <a [routerLink]=\"paths.signUp.path\" class=\"text-orange\">Đăng ký tại đây</a></span\r\n          >\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n  <div class=\"hero-img hidden md:flex justify-center flex-shrink-0 overflow-hidden relative\">\r\n    <img class=\"w-full h-full object-cover absolute top-0\" src=\"/assets/images/hero-image.webp\" alt=\"\" />\r\n    <span class=\"text-white text-[36px] font-semibold text-center relative\">Tri thức khởi đầu<br />từ “Tại sao”?</span>\r\n  </div>\r\n</div>\r\n<div\r\n  *ngIf=\"userNotConfirmedError\"\r\n  class=\"bg-blueGrey-100 absolute top-0 left-0 w-screen h-screen flex items-center justify-center p-6\"\r\n>\r\n  <div class=\"flex flex-col items-center justify-center w-full sm:w-[493px] gap-6\">\r\n    <img src=\"assets/images/Account Not Verified.svg\" />\r\n    <div class=\"bg-white rounded-sm p-6 flex flex-col gap-6\">\r\n      <h4 class=\"text-primaryBlue\">Tài khoản của bạn chưa được xác thực</h4>\r\n      <div class=\"flex flex-col gap-2\">\r\n        <span\r\n          >Để có thể sử dụng ứng dụng Kyons, bạn cần <strong>nhấp vào đường dẫn xác thực</strong> đã được gửi trong\r\n          email đăng ký của bạn.</span\r\n        >\r\n        <span>Ngoài ra, bạn có thể yêu cầu gửi lại link xác thực bằng cách bấm vào nút dưới đây</span>\r\n      </div>\r\n      <a class=\"btn\" [routerLink]=\"paths.signIn.path\">Gửi lại email xác thực (30s)</a>\r\n      <button class=\"btn rounded\" (click)=\"userNotConfirmedError = false\">Quay lại đăng nhập</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","export enum FormControlStatus {\r\n  VALID = 'VALID',\r\n  INVALID = 'INVALID',\r\n  PENDING = 'PENDING',\r\n  DISABLED = 'DISABLED',\r\n}\r\n"],"names":["AuthCredential","constructor","email","password","toJson","username","AngularFireMessaging","MessagingService","messaging","requestPermission","getToken","_","i0","ɵɵinject","i1","_2","factory","ɵfac","providedIn","CommonModule","Location","ElementRef","inject","FormBuilder","FormControl","FormsModule","ReactiveFormsModule","Validators","Router","RouterModule","RedirectAfterLogin","environment","AuthService","LoadingOverlayService","NavigationService","notificationServiceProvider","UserService","FormControlStatus","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","SignInComponent_div_17_div_1_Template","ɵɵadvance","ɵɵproperty","ctx_r1","errors","ɵɵelement","ɵɵlistener","SignInComponent_div_40_Template_button_click_16_listener","ɵɵrestoreView","_r9","ctx_r8","ɵɵnextContext","ɵɵresetView","userNotConfirmedError","ctx_r6","paths","signIn","path","SignInComponent","location","navService","fb","authService","router","loading","userService","messagingService","class","signInForm","group","required","errorMessage","processing","isDebug","showPassword","isEdited","isPromotionEnable","ngOnInit","addControl","get","valueChanges","subscribe","ngOnDestroy","hide","ngAfterViewInit","emailElm","nativeElement","focus","login","setValue","dirty","markAsDirty","status","VALID","value","next","result","success","replaceState","redirectPath","getRouteAfterLogin","redirect_after_auth","HomeAppTutorial","setForceCompleteTutorial","show","production","console","log","token","setTimeout","navigate","error","error_code","debug","selectors","viewQuery","SignInComponent_Query","rf","ctx","ɵɵStandaloneFeature","decls","vars","consts","template","SignInComponent_Template","SignInComponent_Template_img_dblclick_9_listener","SignInComponent_div_17_Template","SignInComponent_Template_div_click_21_listener","SignInComponent_i_22_Template","SignInComponent_i_23_Template","SignInComponent_div_24_Template","SignInComponent_Template_button_click_25_listener","SignInComponent_div_40_Template","invalid","ɵɵtextInterpolate1","resetPassword","signUp","NgIf","i2","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i3","RouterLink","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}