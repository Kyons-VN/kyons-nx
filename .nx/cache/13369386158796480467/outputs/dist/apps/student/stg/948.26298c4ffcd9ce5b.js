"use strict";(self.webpackChunkstudent=self.webpackChunkstudent||[]).push([[948],{5948:(B,h,o)=>{o.r(h),o.d(h,{SignInComponent:()=>S});var l=o(6814),e=o(9212),r=o(95),c=o(2586),d=o(8112),g=o(2092),f=o(3486),p=o(7695);class E{constructor({email:u,password:n}){this.email=u,this.password=n}toJson(){return{username:this.email,password:this.password}}}var v=o(9288),b=o(2033),x=o(2443);let A=(()=>{class i{constructor(n){this.messaging=n}requestPermission(){return this.messaging.requestPermission}getToken(){return this.messaging.getToken}static#e=this.\u0275fac=function(s){return new(s||i)(e.LFG(x.BG))};static#i=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var w=o(2732),I=o(3732),m=function(i){return i.VALID="VALID",i.INVALID="INVALID",i.PENDING="PENDING",i.DISABLED="DISABLED",i}(m||{}),Z=o(1687);const _=["emailElm"];function T(i,u){1&i&&(e.TgZ(0,"div",28),e._uU(1,"Vui l\xf2ng nh\u1eadp theo \u0111\u1ecbnh d\u1ea1ng abc@email.com."),e.qZA())}function C(i,u){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,T,2,0,"div",19),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.email.errors?null:n.email.errors.email)}}function D(i,u){1&i&&e._UZ(0,"i",29)}function k(i,u){1&i&&e._UZ(0,"i",30)}function y(i,u){1&i&&(e.TgZ(0,"div",28),e._uU(1,"Th\xf4ng tin ch\u01b0a ch\xednh x\xe1c"),e.qZA())}function F(i,u){if(1&i&&e._uU(0),2&i){const n=e.oxw(2);e.hij("(",n.countdown,"s)")}}function U(i,u){if(1&i){const n=e.EpF();e.TgZ(0,"div",31)(1,"div",32),e._UZ(2,"img",33),e.TgZ(3,"div",34)(4,"h4",35),e._uU(5,"T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n ch\u01b0a \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c"),e.qZA(),e.TgZ(6,"div",36)(7,"span"),e._uU(8,"\u0110\u1ec3 c\xf3 th\u1ec3 s\u1eed d\u1ee5ng \u1ee9ng d\u1ee5ng Kyons, b\u1ea1n c\u1ea7n "),e.TgZ(9,"strong"),e._uU(10,"nh\u1ea5p v\xe0o \u0111\u01b0\u1eddng d\u1eabn x\xe1c th\u1ef1c"),e.qZA(),e._uU(11," \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi trong email \u0111\u0103ng k\xfd c\u1ee7a b\u1ea1n."),e.qZA(),e.TgZ(12,"span"),e._uU(13,"Ngo\xe0i ra, b\u1ea1n c\xf3 th\u1ec3 y\xeau c\u1ea7u g\u1eedi l\u1ea1i link x\xe1c th\u1ef1c b\u1eb1ng c\xe1ch b\u1ea5m v\xe0o n\xfat d\u01b0\u1edbi \u0111\xe2y"),e.qZA()(),e.TgZ(14,"button",20),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.resend())}),e._uU(15," G\u1eedi l\u1ea1i email x\xe1c th\u1ef1c "),e.YNc(16,F,1,1),e.qZA(),e.TgZ(17,"button",37),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.userNotConfirmedError=!1)}),e._uU(18,"Quay l\u1ea1i \u0111\u0103ng nh\u1eadp"),e.qZA()()()()}if(2&i){const n=e.oxw();e.xp6(14),e.Q6J("disabled",n.pendingResendEmail),e.xp6(2),e.um2(16,n.pendingResendEmail?16:-1)}}function N(i,u){if(1&i){const n=e.EpF();e.TgZ(0,"div",38)(1,"div",39),e._UZ(2,"img",40),e.TgZ(3,"div",41)(4,"h5",42),e._uU(5,"Ch\xfa \xfd! Ch\xfa \xfd!"),e.qZA(),e.TgZ(6,"span"),e._uU(7," H\u1ec7 th\u1ed1ng hi\u1ec7n \u0111ang g\u1eb7p s\u1ef1 c\u1ed1, b\u1ea1n vui l\xf2ng th\u1eed l\u1ea1i sau v\xe0i ph\xfat ho\u1eb7c li\xean h\u1ec7 "),e.TgZ(8,"a",43),e._uU(9,"Kyons Fanpage"),e.qZA(),e._uU(10," \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 k\u1ecbp th\u1eddi! "),e.qZA(),e.TgZ(11,"button",44),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.resendVerificationEmailError=!1)}),e._uU(12,"M\xecnh \u0111\xe3 hi\u1ec3u"),e.qZA()()()()}}let S=(()=>{class i{constructor(){this.location=(0,e.f3M)(l.Ye),this.navService=(0,e.f3M)(b.f),this.paths=this.navService.paths,this.fb=(0,e.f3M)(r.qu),this.authService=(0,e.f3M)(p.e),this.router=(0,e.f3M)(c.F0),this.loading=(0,e.f3M)(v.i),this.userService=(0,e.f3M)(I.K),this.messagingService=(0,e.f3M)(A),this.accountService=(0,e.f3M)(f.c),this.class="h-full",this.signInForm=this.fb.group({}),this.email=new r.NI("",[r.kI.required,r.kI.email]),this.password=new r.NI("",r.kI.required),this.errorMessage=!1,this.processing=!1,this.isDebug=!1,this.showPassword=!1,this.isEdited=!1,this.isPromotionEnable=g.N.isPromotionEnable,this.userNotConfirmedError=!1,this.resendVerificationEmailError=!1,this.pendingResendEmail=!1,this.countdown=30}ngOnInit(){this.signInForm.addControl("email",this.email),this.signInForm.addControl("password",this.password),this.signInForm.get("email")?.valueChanges.subscribe(()=>{this.errorMessage=!1}),this.signInForm.get("password")?.valueChanges.subscribe(()=>{this.errorMessage=!1})}ngOnDestroy(){this.loading.hide(),void 0!==this.$interval&&this.$interval.unsubscribe()}ngAfterViewInit(){this.emailElm.nativeElement.focus()}login(){if(this.isDebug&&(this.email.setValue("binhhm2009+0801@gmail.com"),this.password.setValue("Sx_-2m5c")),this.isEdited||(this.isEdited=!0),!this.signInForm.get("email")?.dirty||!this.signInForm.get("password")?.dirty)return this.signInForm.get("email")?.markAsDirty(),void this.signInForm.get("password")?.markAsDirty();this.signInForm.status===m.VALID&&(this.processing=!0,this.authService.signIn(new E(this.signInForm.value)).subscribe({next:n=>{if(n.success){this.location.replaceState("/");const s=this.navService.getRouteAfterLogin(n.redirect_after_auth);n.redirect_after_auth==d.Z[d.Z.HomeAppTutorial]&&this.userService.setForceCompleteTutorial(),this.loading.show(),g.N.production?this.messagingService.requestPermission().subscribe({next:t=>{console.log("requestPermission next",t),this.messagingService.getToken().subscribe({next:a=>{console.log("getToken next",a),setTimeout(()=>{this.router.navigate([s[0]],s[1])},600)},error:a=>{console.log("getToken error",a)}})},error:t=>{console.log("requestPermission error",t)}}):setTimeout(()=>{this.router.navigate([s[0]],s[1])},600)}else this.processing=!1,this.errorMessage=!0,this.loading.hide(),"UserNotConfirmedException"==n.error_code&&(this.userNotConfirmedError=!0)},error:()=>{this.errorMessage=!0,this.processing=!1,this.loading.hide()}}))}debug(){g.N.production||(this.isDebug=!0)}resend(){this.pendingResendEmail=!0;const n=(0,Z.F)(1e3);this.$interval=n.subscribe(()=>{this.countdown--,0==this.countdown&&(this.pendingResendEmail=!1)}),this.accountService.resendVerificationEmail(this.email.value).subscribe({next:()=>{this.router.navigate([this.paths.resendVerified.path])},error:()=>{this.resendVerificationEmailError=!0}})}static#e=this.\u0275fac=function(s){return new(s||i)};static#i=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(s,t){if(1&s&&e.Gf(_,5),2&s){let a;e.iGM(a=e.CRH())&&(t.emailElm=a.first)}},hostVars:2,hostBindings:function(s,t){2&s&&e.Tol(t.class)},standalone:!0,features:[e._Bn([w.$]),e.jDz],decls:42,vars:12,consts:[[1,"flex-col","md:flex","md:flex-row","h-full","md:overflow-hidden"],[1,"col","md:hidden","hero-bg","py-8","px-6","gap-2",2,"height","calc(100vw * 204 / 375)"],["src","/assets/images/logo-horizontal-light.webp","alt","",1,"self-start","h-[32px]"],[1,"h7","text-white","w-full","text-center"],[1,"background-image","flex","w-full","h-full","md:items-center","justify-center"],[1,"flex","flex-col","w-full","md:w-[434px]","min-h-[338px]","p-6","mb-24","gap-6","overflow-auto","flex-shrink-0"],["src","/assets/images/logo-h.svg","alt","Logo",1,"h-12","self-start","hidden","md:block",3,"dblclick"],[1,"col","gap-6","w-full",3,"formGroup"],[1,"col","gap-2"],[1,"col","w-full"],["type","text","placeholder","Nh\u1eadp email","formControlName","email"],["emailElm",""],[4,"ngIf"],[1,"relative","w-full"],["placeholder","Nh\u1eadp m\u1eadt kh\u1ea9u","formControlName","password",1,"w-full",3,"type"],["passwordElm",""],[1,"absolute","right-0","top-0","w-11","h-full","flex","items-center","justify-center","cursor-pointer",3,"click"],["class","icon-VisibilityOff","tabindex","0",4,"ngIf"],["class","icon-Visibility","tabindex","0",4,"ngIf"],["class","error",4,"ngIf"],[1,"btn",3,"disabled","click"],[1,"col","items-start","gap-2"],[1,"text-orange",3,"routerLink"],[1,"hero-img","hidden","md:flex","justify-center","flex-shrink-0","overflow-hidden","relative"],["src","/assets/images/hero-image.webp","alt","",1,"w-full","h-full","object-cover","absolute","top-0"],[1,"text-white","text-[36px]","font-semibold","text-center","relative"],["class","bg-blueGrey-100 absolute top-0 left-0 w-screen h-screen flex items-center justify-center p-6",4,"ngIf"],["class","absolute top-0 left-0 w-full h-screen bg-black bg-opacity-80 flex items-center justify-center",4,"ngIf"],[1,"error"],["tabindex","0",1,"icon-VisibilityOff"],["tabindex","0",1,"icon-Visibility"],[1,"bg-blueGrey-100","absolute","top-0","left-0","w-screen","h-screen","flex","items-center","justify-center","p-6"],[1,"flex","flex-col","items-center","justify-center","w-full","sm:w-[493px]","gap-6"],["src","assets/images/Account Not Verified.svg"],[1,"bg-white","rounded-sm","p-6","flex","flex-col","gap-6"],[1,"text-primaryBlue"],[1,"flex","flex-col","gap-2"],[1,"btn","btn-rounded",3,"click"],[1,"absolute","top-0","left-0","w-full","h-screen","bg-black","bg-opacity-80","flex","items-center","justify-center"],[1,"col","rounded-2xl","bg-white","gap-6","p-6","w-full","md:w-[700px]","items-center"],["src","/assets/images/warning.webp","alt",""],[1,"col","w-full","gap-6"],[1,"text-center"],["href","https://www.facebook.com/KyonsVN","target","_blank"],[1,"btn","w-full",3,"click"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.TgZ(3,"span",3),e._uU(4,"Tri th\u1ee9c kh\u1edfi \u0111\u1ea7u t\u1eeb"),e._UZ(5,"br"),e._uU(6,"\u201cT\u1ea1i sao\u201d?"),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"img",6),e.NdJ("dblclick",function(){return t.debug()}),e.qZA(),e.TgZ(10,"form",7)(11,"h4"),e._uU(12,"M\u1eebng b\u1ea1n quay tr\u1edf l\u1ea1i!"),e.qZA(),e.TgZ(13,"div",8)(14,"div",9),e._UZ(15,"input",10,11),e.YNc(17,C,2,1,"div",12),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"input",14,15),e.TgZ(21,"div",16),e.NdJ("click",function(){return t.showPassword=!t.showPassword}),e.YNc(22,D,1,0,"i",17)(23,k,1,0,"i",18),e.qZA()()(),e.YNc(24,y,2,0,"div",19),e.TgZ(25,"button",20),e.NdJ("click",function(){return t.login()}),e._uU(26),e.qZA(),e.TgZ(27,"div",21)(28,"a",22),e._uU(29,"Qu\xean m\u1eadt kh\u1ea9u"),e.qZA(),e.TgZ(30,"span"),e._uU(31,"B\u1ea1n ch\u01b0a c\xf3 t\xe0i kho\u1ea3n? \xa0 "),e.TgZ(32,"a",22),e._uU(33,"\u0110\u0103ng k\xfd t\u1ea1i \u0111\xe2y"),e.qZA()()()()()(),e.TgZ(34,"div",23),e._UZ(35,"img",24),e.TgZ(36,"span",25),e._uU(37,"Tri th\u1ee9c kh\u1edfi \u0111\u1ea7u"),e._UZ(38,"br"),e._uU(39,"t\u1eeb \u201cT\u1ea1i sao\u201d?"),e.qZA()()(),e.YNc(40,U,19,2,"div",26)(41,N,13,0,"div",27)),2&s&&(e.xp6(10),e.Q6J("formGroup",t.signInForm),e.xp6(7),e.Q6J("ngIf",t.email.invalid&&t.isEdited),e.xp6(2),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(3),e.Q6J("ngIf",t.showPassword),e.xp6(1),e.Q6J("ngIf",!t.showPassword),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(1),e.Q6J("disabled",t.processing),e.xp6(1),e.hij(" ",t.processing?"\u0110ang x\u1eed l\xfd":"\u0110\u0103ng nh\u1eadp"," "),e.xp6(2),e.Q6J("routerLink",t.paths.resetPassword.path),e.xp6(4),e.Q6J("routerLink",t.paths.signUp.path),e.xp6(8),e.Q6J("ngIf",t.userNotConfirmedError),e.xp6(1),e.Q6J("ngIf",t.resendVerificationEmailError))},dependencies:[l.ez,l.O5,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.UX,r.sg,r.u,c.Bz,c.rH],styles:[".error[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}.hero-img[_ngcontent-%COMP%]{border-radius:16px 0 0 16px;width:88.5vh;padding-top:20vh}.hero-bg[_ngcontent-%COMP%]{width:100%;height:200px;background-image:url(/assets/images/hero-image-xs.webp);background-position:bottom right;background-repeat:no-repeat;background-size:cover}.background-image[_ngcontent-%COMP%]{background-image:url(/assets/images/sign-in-top-right-bg.webp),url(/assets/images/sign-in-bottom-left-bg.webp);background-position:top right 23px,bottom left;background-repeat:no-repeat}"]})}return i})()}}]);