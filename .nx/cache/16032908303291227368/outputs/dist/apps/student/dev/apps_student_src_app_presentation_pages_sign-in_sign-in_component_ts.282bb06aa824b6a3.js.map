{"version":3,"file":"apps_student_src_app_presentation_pages_sign-in_sign-in_component_ts.282bb06aa824b6a3.js","mappings":"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","sources":["./apps/student/src/app/infrastructure/auth/credential.ts","./apps/student/src/app/infrastructure/notification/messaging.service.ts","./apps/student/src/app/presentation/pages/sign-in/sign-in.component.ts","./apps/student/src/app/presentation/pages/sign-in/sign-in.component.html","./apps/student/src/app/utils/form.ts"],"sourcesContent":["import { IAuthCredential } from '@domain/auth/i-auth-service';\r\n\r\nexport class AuthCredential implements IAuthCredential {\r\n  email: string;\r\n  password: string;\r\n\r\n  constructor({ email, password }: { email: string; password: string }) {\r\n    this.email = email;\r\n    this.password = password;\r\n  }\r\n\r\n  toJson() {\r\n    return {\r\n      username: this.email,\r\n      password: this.password,\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { AngularFireMessaging } from '@angular/fire/compat/messaging';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MessagingService {\n  constructor(private messaging: AngularFireMessaging) {\n    // Get the current FCM token\n  }\n\n  requestPermission() {\n    return this.messaging.requestPermission;\n  }\n\n  getToken() {\n    return this.messaging.getToken;\n  }\n}\n","import { CommonModule, Location } from '@angular/common';\r\nimport { AfterViewInit, Component, ElementRef, HostBinding, OnDestroy, OnInit, ViewChild, inject } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { Router, RouterModule } from '@angular/router';\r\nimport { RedirectAfterLogin } from '@domain/navigation/i-redirect';\r\nimport { environment } from '@environments/environment';\r\nimport { AccountStandaloneService } from '@infrastructure/auth/account.service';\r\nimport { AuthService } from '@infrastructure/auth/auth.service';\r\nimport { AuthCredential } from '@infrastructure/auth/credential';\r\nimport { LoadingOverlayService } from '@infrastructure/loading-overlay.service';\r\nimport { NavigationService } from '@infrastructure/navigation/navigation.service';\r\nimport { MessagingService } from '@infrastructure/notification/messaging.service';\r\nimport { notificationServiceProvider } from '@infrastructure/notification/notification.service';\r\nimport { UserService } from '@infrastructure/user/user.service';\r\nimport { FormControlStatus } from '@utils/form';\r\n\r\n@Component({\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, RouterModule],\r\n  providers: [notificationServiceProvider],\r\n  templateUrl: './sign-in.component.html',\r\n  styleUrls: ['./sign-in.component.scss'],\r\n})\r\nexport class SignInComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  location = inject(Location);\r\n  navService = inject(NavigationService);\r\n  paths = this.navService.paths;\r\n  fb = inject(FormBuilder);\r\n  authService = inject(AuthService);\r\n  router = inject(Router);\r\n  loading = inject(LoadingOverlayService);\r\n  userService = inject(UserService);\r\n  messagingService = inject(MessagingService);\r\n  accountService = inject(AccountStandaloneService);\r\n\r\n  @HostBinding('class') class = 'h-full';\r\n\r\n  signInForm: FormGroup = this.fb.group({});\r\n  email: FormControl = new FormControl('', [Validators.required, Validators.email]);\r\n  password: FormControl = new FormControl('', Validators.required);\r\n  errorMessage = false;\r\n  processing = false;\r\n  isDebug = false;\r\n  showPassword = false;\r\n  isEdited = false;\r\n\r\n  isPromotionEnable = environment.isPromotionEnable;\r\n  userNotConfirmedError = false;\r\n  resendVerificationEmailError = false;\r\n  pendingResendEmail = false;\r\n  countdown = 30;\r\n\r\n  @ViewChild('emailElm') emailElm!: ElementRef;\r\n\r\n  ngOnInit(): void {\r\n    this.signInForm.addControl('email', this.email);\r\n    this.signInForm.addControl('password', this.password);\r\n    this.signInForm.get('email')?.valueChanges.subscribe(() => {\r\n      this.errorMessage = false;\r\n    });\r\n    this.signInForm.get('password')?.valueChanges.subscribe(() => {\r\n      this.errorMessage = false;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loading.hide();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.emailElm.nativeElement.focus();\r\n  }\r\n\r\n  login() {\r\n    if (this.isDebug) {\r\n      this.email.setValue('binhhm2009+0801@gmail.com');\r\n      this.password.setValue('Sx_-2m5c');\r\n    }\r\n    if (!this.isEdited) this.isEdited = true;\r\n    if (!(this.signInForm.get('email')?.dirty && this.signInForm.get('password')?.dirty)) {\r\n      this.signInForm.get('email')?.markAsDirty();\r\n      this.signInForm.get('password')?.markAsDirty();\r\n      return;\r\n    }\r\n    if (this.signInForm.status === FormControlStatus.VALID) {\r\n      this.processing = true;\r\n      this.authService.signIn(new AuthCredential(this.signInForm.value)).subscribe({\r\n        next: result => {\r\n          if (result.success) {\r\n            this.location.replaceState('/');\r\n            const redirectPath = this.navService.getRouteAfterLogin(result.redirect_after_auth);\r\n            if (result.redirect_after_auth == RedirectAfterLogin[RedirectAfterLogin.HomeAppTutorial]) {\r\n              this.userService.setForceCompleteTutorial();\r\n            }\r\n            this.loading.show();\r\n            if (environment.production)\r\n              this.messagingService.requestPermission().subscribe({\r\n                next: value => {\r\n                  console.log('requestPermission next', value);\r\n                  this.messagingService.getToken().subscribe({\r\n                    next: token => {\r\n                      console.log('getToken next', token);\r\n\r\n                      setTimeout(() => {\r\n                        this.router.navigate([redirectPath[0]], redirectPath[1]);\r\n                      }, 600);\r\n                    },\r\n                    error: error => {\r\n                      console.log('getToken error', error);\r\n                    },\r\n                  });\r\n                },\r\n                error: error => {\r\n                  console.log('requestPermission error', error);\r\n                },\r\n              });\r\n            else {\r\n              setTimeout(() => {\r\n                this.router.navigate([redirectPath[0]], redirectPath[1]);\r\n              }, 600);\r\n            }\r\n          } else {\r\n            this.processing = false;\r\n            this.errorMessage = true;\r\n            this.loading.hide();\r\n            if (result.error_code == 'UserNotConfirmedException') {\r\n              this.userNotConfirmedError = true;\r\n            }\r\n          }\r\n        },\r\n        error: () => {\r\n          // TODO: Define error resposes\r\n          this.errorMessage = true;\r\n          this.processing = false;\r\n          this.loading.hide();\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  debug() {\r\n    if (!environment.production) this.isDebug = true;\r\n  }\r\n\r\n  resend() {\r\n    this.pendingResendEmail = true;\r\n    setInterval(() => {\r\n      this.countdown--;\r\n      if (this.countdown == 0) {\r\n        this.pendingResendEmail = false;\r\n      }\r\n    }, 1000);\r\n    this.accountService.resendVerificationEmail(this.email.value).subscribe({\r\n      next: () => {\r\n        this.router.navigate([this.paths.resendVerified]);\r\n      },\r\n      error: () => {\r\n        this.resendVerificationEmailError = true;\r\n      },\r\n    });\r\n  }\r\n}\r\n","<div class=\"flex-col md:flex md:flex-row h-full md:overflow-hidden\">\r\n  <div class=\"col md:hidden hero-bg py-8 px-6 gap-2\" style=\"height: calc(100vw * 204 / 375)\">\r\n    <img src=\"/assets/images/logo-horizontal-light.webp\" alt=\"\" class=\"self-start h-[32px]\" />\r\n    <span class=\"h7 text-white w-full text-center\">Tri thức khởi đầu từ<br />“Tại sao”?</span>\r\n  </div>\r\n  <div class=\"background-image flex w-full h-full md:items-center justify-center\">\r\n    <div class=\"flex flex-col w-full md:w-[434px] min-h-[338px] p-6 mb-24 gap-6 overflow-auto flex-shrink-0\">\r\n      <img (dblclick)=\"debug()\" src=\"/assets/images/logo-h.svg\" alt=\"Logo\" class=\"h-12 self-start hidden md:block\" />\r\n      <form [formGroup]=\"signInForm\" class=\"col gap-6 w-full\">\r\n        <h4>Mừng bạn quay trở lại!</h4>\r\n        <div class=\"col gap-2\">\r\n          <div class=\"col w-full\">\r\n            <input type=\"text\" #emailElm placeholder=\"Nhập email\" formControlName=\"email\" />\r\n            <div *ngIf=\"email.invalid && isEdited\">\r\n              <div class=\"error\" *ngIf=\"email.errors?.['email']\">Vui lòng nhập theo định dạng abc&#64;email.com.</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"relative w-full\">\r\n            <input\r\n              #passwordElm\r\n              [type]=\"showPassword ? 'text' : 'password'\"\r\n              class=\"w-full\"\r\n              placeholder=\"Nhập mật khẩu\"\r\n              formControlName=\"password\"\r\n            />\r\n            <div\r\n              (click)=\"showPassword = !showPassword\"\r\n              class=\"absolute right-0 top-0 w-11 h-full flex items-center justify-center cursor-pointer\"\r\n            >\r\n              <i *ngIf=\"showPassword\" class=\"icon-VisibilityOff\" tabindex=\"0\"></i>\r\n              <i *ngIf=\"!showPassword\" class=\"icon-Visibility\" tabindex=\"0\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"error\" *ngIf=\"errorMessage\">Thông tin chưa chính xác</div>\r\n        <button (click)=\"login()\" class=\"btn\" [disabled]=\"processing\">\r\n          {{ processing ? 'Đang xử lý' : 'Đăng nhập' }}\r\n        </button>\r\n        <div class=\"col items-start gap-2\">\r\n          <a [routerLink]=\"paths.resetPassword.path\" class=\"text-orange\">Quên mật khẩu</a>\r\n          <span\r\n            >Bạn chưa có tài khoản? &nbsp;\r\n            <a [routerLink]=\"paths.signUp.path\" class=\"text-orange\">Đăng ký tại đây</a></span\r\n          >\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n  <div class=\"hero-img hidden md:flex justify-center flex-shrink-0 overflow-hidden relative\">\r\n    <img class=\"w-full h-full object-cover absolute top-0\" src=\"/assets/images/hero-image.webp\" alt=\"\" />\r\n    <span class=\"text-white text-[36px] font-semibold text-center relative\">Tri thức khởi đầu<br />từ “Tại sao”?</span>\r\n  </div>\r\n</div>\r\n<div\r\n  *ngIf=\"userNotConfirmedError\"\r\n  class=\"bg-blueGrey-100 absolute top-0 left-0 w-screen h-screen flex items-center justify-center p-6\"\r\n>\r\n  <div class=\"flex flex-col items-center justify-center w-full sm:w-[493px] gap-6\">\r\n    <img src=\"assets/images/Account Not Verified.svg\" />\r\n    <div class=\"bg-white rounded-sm p-6 flex flex-col gap-6\">\r\n      <h4 class=\"text-primaryBlue\">Tài khoản của bạn chưa được xác thực</h4>\r\n      <div class=\"flex flex-col gap-2\">\r\n        <span\r\n          >Để có thể sử dụng ứng dụng Kyons, bạn cần <strong>nhấp vào đường dẫn xác thực</strong> đã được gửi trong\r\n          email đăng ký của bạn.</span\r\n        >\r\n        <span>Ngoài ra, bạn có thể yêu cầu gửi lại link xác thực bằng cách bấm vào nút dưới đây</span>\r\n      </div>\r\n      <button class=\"btn\" (click)=\"resend()\" [disabled]=\"pendingResendEmail\">\r\n        Gửi lại email xác thực @if(pendingResendEmail){({{ countdown }}s)}\r\n      </button>\r\n      <button class=\"btn btn-rounded\" (click)=\"userNotConfirmedError = false\">Quay lại đăng nhập</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div\r\n  *ngIf=\"resendVerificationEmailError\"\r\n  class=\"absolute top-0 left-0 w-full h-screen bg-black bg-opacity-80 flex items-center justify-center\"\r\n>\r\n  <div class=\"col rounded-2xl bg-white gap-6 p-6 w-full md:w-[700px] items-center\">\r\n    <img src=\"/assets/images/warning.webp\" alt=\"\" />\r\n    <div class=\"col w-full gap-6\">\r\n      <h5 class=\"text-center\">Chú ý! Chú ý!</h5>\r\n      <span>\r\n        Hệ thống hiện đang gặp sự cố, bạn vui lòng thử lại sau vài phút hoặc liên hệ\r\n        <a href=\"https://www.facebook.com/KyonsVN\" target=\"_blank\">Kyons Fanpage</a> để được hỗ trợ kịp thời!\r\n      </span>\r\n      <button (click)=\"resendVerificationEmailError = false\" class=\"btn w-full\">Mình đã hiểu</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","export enum FormControlStatus {\r\n  VALID = 'VALID',\r\n  INVALID = 'INVALID',\r\n  PENDING = 'PENDING',\r\n  DISABLED = 'DISABLED',\r\n}\r\n"],"names":["AuthCredential","constructor","email","password","toJson","username","AngularFireMessaging","MessagingService","messaging","requestPermission","getToken","_","i0","ɵɵinject","i1","_2","factory","ɵfac","providedIn","CommonModule","Location","ElementRef","inject","FormBuilder","FormControl","FormsModule","ReactiveFormsModule","Validators","Router","RouterModule","RedirectAfterLogin","environment","AccountStandaloneService","AuthService","LoadingOverlayService","NavigationService","notificationServiceProvider","UserService","FormControlStatus","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","SignInComponent_div_17_div_1_Template","ɵɵadvance","ɵɵproperty","ctx_r1","errors","ɵɵelement","ɵɵtextInterpolate1","ctx_r9","countdown","ɵɵlistener","SignInComponent_div_40_Template_button_click_14_listener","ɵɵrestoreView","_r11","ctx_r10","ɵɵnextContext","ɵɵresetView","resend","SignInComponent_div_40_Conditional_16_Template","SignInComponent_div_40_Template_button_click_17_listener","ctx_r12","userNotConfirmedError","ctx_r6","pendingResendEmail","ɵɵconditional","SignInComponent_div_41_Template_button_click_11_listener","_r14","ctx_r13","resendVerificationEmailError","SignInComponent","location","navService","paths","fb","authService","router","loading","userService","messagingService","accountService","class","signInForm","group","required","errorMessage","processing","isDebug","showPassword","isEdited","isPromotionEnable","ngOnInit","addControl","get","valueChanges","subscribe","ngOnDestroy","hide","ngAfterViewInit","emailElm","nativeElement","focus","login","setValue","dirty","markAsDirty","status","VALID","signIn","value","next","result","success","replaceState","redirectPath","getRouteAfterLogin","redirect_after_auth","HomeAppTutorial","setForceCompleteTutorial","show","production","console","log","token","setTimeout","navigate","error","error_code","debug","setInterval","resendVerificationEmail","resendVerified","selectors","viewQuery","SignInComponent_Query","rf","ctx","ɵɵStandaloneFeature","decls","vars","consts","template","SignInComponent_Template","SignInComponent_Template_img_dblclick_9_listener","SignInComponent_div_17_Template","SignInComponent_Template_div_click_21_listener","SignInComponent_i_22_Template","SignInComponent_i_23_Template","SignInComponent_div_24_Template","SignInComponent_Template_button_click_25_listener","SignInComponent_div_40_Template","SignInComponent_div_41_Template","invalid","resetPassword","path","signUp","NgIf","i2","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i3","RouterLink","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}