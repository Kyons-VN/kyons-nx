"use strict";(self.webpackChunkstudent=self.webpackChunkstudent||[]).push([[195],{2195:(Y,m,u)=>{u.r(m),u.d(m,{ResetPasswordComponent:()=>O});var c=u(6814),r=u(95),_=u(2586),p=u(3486),h=u(2033),l=u(4901),e=u(9212),f=u(9288);const g=["emailElm"],E=["codeElm"],v=["passwordElm"];function x(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1,"Ch\u01b0a nh\u1eadp Email."),e.qZA())}function w(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1,"Email ch\u01b0a \u0111\xfang."),e.qZA())}function C(s,i){if(1&s&&(e.TgZ(0,"div",18),e.YNc(1,x,2,0,"div",19)(2,w,2,0,"div",19),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.email.errors?null:t.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.email.errors?null:t.email.errors.email)}}function A(s,i){1&s&&(e.TgZ(0,"div",18)(1,"div"),e._uU(2,"Kh\xf4ng t\xecm th\u1ea5y t\xe0i kho\u1ea3n tr\xf9ng kh\u1edbp email."),e.qZA()())}function Z(s,i){1&s&&(e.TgZ(0,"div",20),e._uU(1,"Th\xf4ng tin ch\u01b0a ch\xednh x\xe1c"),e.qZA())}const T=s=>({"!text-orange border-orange":s});function F(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"form",9)(1,"p",10),e._uU(2,"Nh\u1eadp email c\u1ee7a b\u1ea1n \u0111\u1ec3 nh\u1eadn m\xe3 thay \u0111\u1ed5i m\u1eadt kh\u1ea9u."),e.qZA(),e._UZ(3,"div",7)(4,"input",11,12)(6,"div",13),e.YNc(7,C,3,2,"div",14)(8,A,3,0,"div",14)(9,Z,2,0,"div",15),e._UZ(10,"div",16),e.TgZ(11,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.sendEmail())}),e._uU(12),e.qZA()()}if(2&s){const t=e.oxw();e.Q6J("formGroup",t.emailForm),e.xp6(4),e.Q6J("ngClass",e.VKq(7,T,t.email.invalid||t.emailNotFound)),e.xp6(3),e.Q6J("ngIf",t.email.invalid&&(t.email.dirty||t.email.touched)),e.xp6(1),e.Q6J("ngIf",t.emailNotFound&&(t.email.dirty||t.email.touched)),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(2),e.Q6J("disabled",t.emailForm.touched&&t.emailForm.invalid||t.processing),e.xp6(1),e.hij(" ",t.processing?"\u0110ang x\u1eed l\xfd":"G\u1eedi t\xf4i m\xe3 code"," ")}}function D(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1,"Ch\u01b0a nh\u1eadp m\xe3."),e.qZA())}function P(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1,"C\xfa ph\xe1p ch\u01b0a \u0111\xfang."),e.qZA())}function U(s,i){if(1&s&&(e.TgZ(0,"div",18),e.YNc(1,D,2,0,"div",19)(2,P,2,0,"div",19),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.code.errors?null:t.code.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.code.errors?null:t.code.errors.pattern)}}function I(s,i){1&s&&(e.TgZ(0,"div",18)(1,"div"),e._uU(2,"M\xe3 x\xe1c th\u1ef1c kh\xf4ng \u0111\xfang."),e.qZA()())}function R(s,i){1&s&&e._UZ(0,"i",30)}function J(s,i){1&s&&e._UZ(0,"i",31)}function M(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1,"Ch\u01b0a nh\u1eadp m\u1eadt kh\u1ea9u."),e.qZA())}function y(s,i){1&s&&(e.TgZ(0,"div"),e._uU(1,"M\u1eadt kh\u1ea9u kh\xf4ng h\u1ee3p l\u1ec7."),e.qZA())}function Q(s,i){if(1&s&&(e.TgZ(0,"div",18),e.YNc(1,M,2,0,"div",19)(2,y,2,0,"div",19),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.password.errors?null:t.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.password.errors?null:t.password.errors.pattern)}}const d=s=>({"text-red-0":s});function q(s,i){if(1&s&&(e.TgZ(0,"div",32),e._uU(1," M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3:"),e._UZ(2,"br"),e.TgZ(3,"ul",33)(4,"li",34),e._uU(5," T\u1eeb 8 k\xfd t\u1ef1 tr\u1edf l\xean "),e.qZA(),e.TgZ(6,"li",34),e._uU(7," K\xfd t\u1ef1 vi\u1ebft hoa (A-Z) "),e.qZA(),e.TgZ(8,"li",34),e._uU(9," K\xfd t\u1ef1 s\u1ed1 (0-9) "),e.qZA(),e.TgZ(10,"li",34),e._uU(11," K\xfd t\u1ef1 \u0111\u1eb7c bi\u1ec7t (~! @#$%^&*_-+=`|\\(){}[]:;\"'<>,.?/) "),e.qZA()()()),2&s){const t=e.oxw(2);e.xp6(4),e.Q6J("ngClass",e.VKq(4,d,(t.password.dirty||t.password.touched)&&t.password.value.length<8)),e.xp6(2),e.Q6J("ngClass",e.VKq(6,d,(t.password.dirty||t.password.touched)&&t.notHaveUppercase(t.password.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(8,d,(t.password.dirty||t.password.touched)&&t.notHaveDigit(t.password.value))),e.xp6(2),e.Q6J("ngClass",e.VKq(10,d,(t.password.dirty||t.password.touched)&&t.notHaveSpecial(t.password.value)))}}function b(s,i){if(1&s&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}const N=s=>({"!text-orange":s});function k(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"form",9),e._UZ(1,"div",4),e.TgZ(2,"p",10),e._uU(3," M\xe3 code \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn email c\u1ee7a b\u1ea1n. Vui l\xf2ng ki\u1ec3m tra email v\xe0 nh\u1eadp m\xe3 v\xe0o \xf4 b\xean d\u01b0\u1edbi. "),e.qZA(),e._UZ(4,"div",7)(5,"input",21,22)(7,"div",13),e.YNc(8,U,3,2,"div",14)(9,I,3,0,"div",14),e._UZ(10,"div",16),e.TgZ(11,"div",23),e._UZ(12,"input",24,25),e.TgZ(14,"div",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showPassword=!o.showPassword)}),e.YNc(15,R,1,0,"i",27)(16,J,1,0,"i",28),e.qZA()(),e._UZ(17,"div",13),e.YNc(18,Q,3,2,"div",14),e._UZ(19,"div",16),e.YNc(20,q,12,12,"div",29)(21,b,2,1,"div",14),e._UZ(22,"div",7),e.TgZ(23,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.sendCode())}),e._uU(24),e.qZA()()}if(2&s){const t=e.oxw();e.Q6J("formGroup",t.resetForm),e.xp6(5),e.Q6J("ngClass",e.VKq(12,N,t.wrongCode||t.code.invalid&&(t.code.dirty||t.code.touched))),e.xp6(3),e.Q6J("ngIf",t.code.invalid&&(t.code.dirty||t.code.touched)),e.xp6(1),e.Q6J("ngIf",t.wrongCode),e.xp6(3),e.Q6J("type",t.showPassword?"text":"password"),e.xp6(3),e.Q6J("ngIf",t.showPassword),e.xp6(1),e.Q6J("ngIf",!t.showPassword),e.xp6(2),e.Q6J("ngIf",t.password.invalid&&(t.password.dirty||t.password.touched)),e.xp6(2),e.Q6J("ngIf",t.password.touched),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(2),e.Q6J("disabled",t.resetForm.touched&&t.resetForm.invalid||t.processing),e.xp6(1),e.hij(" ",t.processing?"\u0110ang x\u1eed l\xfd":"Ti\u1ebfp t\u1ee5c"," ")}}function B(s,i){1&s&&(e.TgZ(0,"div",10),e._uU(1," \u0110\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng! H\xe3y \u0111\u0103ng nh\u1eadp v\xe0 tr\u1ea3i nghi\u1ec7m Kyons th\xf4i n\xe0o! "),e.qZA())}const K=(s,i)=>({"text-orange":s,btn:i});let O=(()=>{class s{constructor(t,n,o,a,H){this.route=t,this.fb=n,this.accountService=o,this.loading=H,this.class="h-full",this.emailForm=this.fb.group({}),this.resetForm=this.fb.group({}),this.email=new r.NI("",[r.kI.required,r.kI.email]),this.code=new r.NI("",[r.kI.required,r.kI.pattern(/^[0-9]{6,6}$/g)]),this.step=0,this.emailNotFound=!1,this.password=new r.NI("",[r.kI.required,r.kI.pattern(/^((?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()~=_+}{":;'?{}/>.<,`\-|[\]]).{8,99})/)]),this.errorMessage="",this.processing=!1,this.isDebug=!1,this.wrongCode=!1,this.showPassword=!1,this.paths=a.paths,this.notHaveUppercase=l.JA,this.notHaveDigit=l._6,this.notHaveSpecial=l.W5,this.search=l.yC}ngOnInit(){this.route.queryParams.subscribe(t=>{t.email&&(this.email.setValue(t.email),this.step=1,t.reset_token&&this.code.setValue(t.reset_token))}),this.emailForm.addControl("email",this.email),this.emailForm.get("email")?.valueChanges.subscribe(()=>{this.errorMessage="",this.emailNotFound=!1}),this.emailForm.get("code")?.valueChanges.subscribe(()=>{this.errorMessage="",this.wrongCode=!1}),this.resetForm.addControl("code",this.code),this.resetForm.addControl("password",this.password)}sendEmail(){this.emailForm.untouched?this.emailForm.markAllAsTouched():this.emailForm.invalid||(this.loading.show(),this.processing=!0,this.emailNotFound=!1,this.accountService.requestResetPassword(this.email.value).subscribe({next:()=>{this.step=1,this.processing=!1,this.loading.hide(),setTimeout(()=>{this.codeElm.nativeElement.focus()},1e3)},error:t=>{console.log(t),this.emailNotFound=!0,this.processing=!1,this.loading.hide()}}))}sendCode(){this.resetForm.markAsTouched(),!this.resetForm.invalid&&(this.loading.show(),this.processing=!0,this.emailNotFound=!1,this.accountService.newPassword(this.email.value,this.password.value,this.code.value).subscribe({next:()=>{this.step=2,this.processing=!1,this.loading.hide()},error:t=>{console.log(t),"CodeMismatchException"==t.error.error_code?this.wrongCode=!0:this.errorMessage="ExpiredCodeException"==t.error.error_code?"M\xe3 code \u0111\xe3 h\u1ebft hi\u1ec7u l\u1ef1c, xin th\u1eed l\u1ea1i":t.error.message,this.processing=!1,this.loading.hide()}}))}static#e=this.\u0275fac=function(n){return new(n||s)(e.Y36(_.gz),e.Y36(r.qu),e.Y36(p.c),e.Y36(h.f),e.Y36(f.i))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&(e.Gf(g,5),e.Gf(E,5),e.Gf(v,5)),2&n){let a;e.iGM(a=e.CRH())&&(o.emailElm=a.first),e.iGM(a=e.CRH())&&(o.codeElm=a.first),e.iGM(a=e.CRH())&&(o.passwordElm=a.first)}},hostVars:2,hostBindings:function(n,o){2&n&&e.Tol(o.class)},standalone:!0,features:[e.jDz],decls:11,vars:8,consts:[[1,"flex","flex-col","md:flex-row","h-full"],[1,"flex","flex-col","w-full","h-full","items-center","justify-center","bg-primaryBlue"],[1,"flex","flex-col","w-full","md:w-[434px]","p-4"],["src","./assets/images/logo-v.svg","alt","Logo",1,"h-24"],[1,"h-12"],["class","flex flex-col","autocomplete","off",3,"formGroup",4,"ngIf"],["class","text-white",4,"ngIf"],[1,"h-6"],[3,"routerLink","ngClass"],["autocomplete","off",1,"flex","flex-col",3,"formGroup"],[1,"text-white"],["type","text","placeholder","Nh\u1eadp email","formControlName","email","autocomplete","off",3,"ngClass"],["emailElm",""],[1,"h-1"],["class","error",4,"ngIf"],["class","error mt-1",4,"ngIf"],[1,"h-4"],[1,"btn",3,"disabled","click"],[1,"error"],[4,"ngIf"],[1,"error","mt-1"],["type","text","placeholder","Nh\u1eadp m\xe3 code","formControlName","code","autocomplete","new-code",3,"ngClass"],["codeElm",""],[1,"relative","w-full"],["placeholder","Nh\u1eadp m\u1eadt kh\u1ea9u","formControlName","password",1,"w-full",3,"type"],["passwordElm",""],[1,"absolute","right-0","top-0","w-11","h-full","flex","items-center","justify-center","cursor-pointer",3,"click"],["class","icon-VisibilityOff",4,"ngIf"],["class","icon-Visibility",4,"ngIf"],["class","text-white text-sm",4,"ngIf"],[1,"icon-VisibilityOff"],[1,"icon-Visibility"],[1,"text-white","text-sm"],[1,"list-disc"],[1,"ml-5",3,"ngClass"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3)(4,"div",4),e.YNc(5,F,13,9,"form",5)(6,k,25,14,"form",5)(7,B,2,0,"div",6),e._UZ(8,"div",7),e.TgZ(9,"a",8),e._uU(10,"Quay l\u1ea1i \u0111\u0103ng nh\u1eadp"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("ngIf",0===o.step),e.xp6(1),e.Q6J("ngIf",1===o.step),e.xp6(1),e.Q6J("ngIf",2===o.step),e.xp6(2),e.Q6J("routerLink",o.paths.home.path)("ngClass",e.WLB(5,K,2!==o.step,2===o.step)))},dependencies:[c.ez,c.mk,c.O5,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.UX,r.sg,r.u,_.Bz,_.rH],styles:[".error[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}"]})}return s})()}}]);